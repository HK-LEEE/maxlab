1. 처음 로그인하고, maxlab으로 이동할 때, 잘 로그인 되는 상황.

17:36:24.451 🔄 Rehydrating auth state for initialization
Object { state: {…} }
index-DahPL_yD.js:228:5827
17:36:24.451 🆕 New or unauthenticated user, preparing for silent auth attempt index-DahPL_yD.js:228:6850
17:36:24.453 🛡️ New CSRF token generated index-DahPL_yD.js:263:6222
17:36:24.453 🛡️ CSRF protection initialized with new token index-DahPL_yD.js:263:5768
17:36:24.461 WEBGL_debug_renderer_info is deprecated in Firefox and will be removed. Please use RENDERER. index-DahPL_yD.js:263:21207
17:36:24.464 🔀 OAuth Coordinator [08:36:24][Q:0|A:0]: 🏗️ OAuth Request Coordinator initialized index-DahPL_yD.js:263:51842
17:36:24.477 📍 Saving original navigation URL: https://maxlab.dwchem.co.kr/ index-DahPL_yD.js:851:102026
17:36:24.477 🔄 SSO: Found sync token from MAX Platform index-DahPL_yD.js:851:102683
17:36:24.478 ✅ MaxLab OAuth success recorded, resetting failure counters index-DahPL_yD.js:227:6690
17:36:24.478 📊 MaxLab OAuth attempt recorded:
Object { type: "manual", success: true, error: "none", aborted: false, consecutiveFailures: 0, totalAborted: 0 }
index-DahPL_yD.js:227:7113
17:36:24.478 ✅ OAuth success recorded in loop prevention system index-DahPL_yD.js:228:1269
17:36:24.478 ✅ User authenticated successfully index-DahPL_yD.js:228:1416
17:36:24.478 ✅ SSO Sync: Enhanced metadata stored for SSO session handling index-DahPL_yD.js:851:103332
17:36:24.478 🔄 Auth state change: ready → ready
Object { isAuthenticated: true, hasUser: true, stackTrace: (3) […] }
index-DahPL_yD.js:227:11473
17:36:24.478 ✅ SSO: Auto login from stored sync token successful (no refresh token) index-DahPL_yD.js:851:103503
17:36:24.478 ✅ Auth sync initialized with BroadcastChannel index-DahPL_yD.js:263:94138
17:36:24.478 🔒 Initializing cross-domain logout listener index-DahPL_yD.js:851:104711
17:36:24.478 📡 SSO: PostMessage listener registered index-DahPL_yD.js:851:107716
17:36:24.478 🚀 Starting auth initialization (single instance guaranteed) index-DahPL_yD.js:851:112222
17:36:24.478 ✅ Authentication already initialized index-DahPL_yD.js:851:112864
17:36:24.484 📡 API: Getting workspace tree, parentId: undefined index-DahPL_yD.js:777:27364
17:36:24.533 📡 API: Workspace tree response: 200
Object { workspaces: (4) […], total: 4 }
index-DahPL_yD.js:777:27501




2. 첫번째 maxlab에서 창을 닫고, 다시 maxlab으로 이동할 때, 창이 꺼져버리는 로그

17:37:04.326 🔄 Rehydrating auth state for initialization
Object { state: {…} }
index-DahPL_yD.js:228:5827
17:37:04.326 🆕 New or unauthenticated user, preparing for silent auth attempt index-DahPL_yD.js:228:6850
17:37:04.327 🛡️ CSRF protection initialized with existing token index-DahPL_yD.js:263:5675
17:37:04.333 WEBGL_debug_renderer_info is deprecated in Firefox and will be removed. Please use RENDERER. index-DahPL_yD.js:263:21207
17:37:04.335 🔀 OAuth Coordinator [08:37:04][Q:0|A:0]: 🏗️ OAuth Request Coordinator initialized index-DahPL_yD.js:263:51842
17:37:04.342 ✅ Auth sync initialized with BroadcastChannel index-DahPL_yD.js:263:94138
17:37:04.342 🔒 Initializing cross-domain logout listener index-DahPL_yD.js:851:104711
17:37:04.342 📡 SSO: PostMessage listener registered index-DahPL_yD.js:851:107716
17:37:04.342 🚀 Starting auth initialization (single instance guaranteed) index-DahPL_yD.js:851:112222
17:37:04.342 ⚠️ Cached token locally invalid or expired, attempting refresh index-DahPL_yD.js:851:113996
17:37:04.342 🔄 Force refresh requested, bypassing token validity check index-DahPL_yD.js:263:71163
17:37:04.342 ℹ️ No valid refresh token available index-DahPL_yD.js:263:72682
17:37:04.342 🔄 Refresh token failed, trying silent auth as fallback... index-DahPL_yD.js:263:71759
17:37:04.342 🔄 Attempting token refresh with fallback chain... index-DahPL_yD.js:265:11496
17:37:04.342 🔄 SSO Session: Attempting token refresh via MAX Platform redirect... index-DahPL_yD.js:265:11842
17:37:04.342 🚨 Too many SSO refresh attempts, possible redirect loop detected index-DahPL_yD.js:265:12329
17:37:04.342 ❌ Silent auth attempt 1 failed: Too many authentication attempts - please login manually index-DahPL_yD.js:263:73781
17:37:04.342 🔄 Silent auth retry attempt 1 after 1000ms delay index-DahPL_yD.js:263:73464
17:37:05.343 🔄 Attempting token refresh with fallback chain... index-DahPL_yD.js:265:11496
17:37:05.343 🚫 No refresh token found in any storage index-DahPL_yD.js:263:59638
17:37:05.344 🚫 OAuth callback page has active flow, not safe for silent auth index-DahPL_yD.js:258:20133
17:37:05.344 ❌ Current page not safe for silent auth, refresh completely failed index-DahPL_yD.js:265:17214
17:37:05.344 ❌ Silent auth attempt 2 failed: Refresh token failed and silent auth not available on current page index-DahPL_yD.js:263:73781
17:37:05.344 🔄 Silent auth retry attempt 2 after 2000ms delay index-DahPL_yD.js:263:73464
17:37:07.401 🔄 Attempting token refresh with fallback chain... index-DahPL_yD.js:265:11496
17:37:07.402 🚫 No refresh token found in any storage index-DahPL_yD.js:263:59638
17:37:07.402 🚫 OAuth callback page has active flow, not safe for silent auth index-DahPL_yD.js:258:20133
17:37:07.402 ❌ Current page not safe for silent auth, refresh completely failed index-DahPL_yD.js:265:17214
17:37:07.402 ❌ Silent auth attempt 3 failed: Refresh token failed and silent auth not available on current page index-DahPL_yD.js:263:73781
17:37:07.402 ❌ All token refresh methods failed, checking current token validity index-DahPL_yD.js:263:72008
17:37:07.402 ℹ️ Current token still valid despite refresh failure - user can continue working index-DahPL_yD.js:263:72119
17:37:07.402 🔄 Auth state change: idle → ready 
Object { isAuthenticated: true, hasUser: true, stackTrace: (2) […] }
index-DahPL_yD.js:227:11473
17:37:07.403 🚫 OAuth callback page has active flow, not safe for silent auth index-DahPL_yD.js:258:20133
17:37:07.404 🔍 Popup mode detection started: 
Object { oauthPopupMode: null, oauthWindowType: null, oauthForceAccountSelection: null, windowOpener: true, windowParent: false, windowSize: "1867x543", pathname: "/oauth/callback", referrer: "https://maxlab.dwchem.co.kr/" }
index-DahPL_yD.js:258:10773
17:37:07.404 🔍 Searching for OAuth flow state with state: sso_refr... index-DahPL_yD.js:228:15101
17:37:07.404 📋 Found total flow states: 3 index-DahPL_yD.js:228:15218
17:37:07.405 ✅ Found OAuth flow state: 
Object { flowId: "me9pvmg3sf8maawhekd", flowType: "redirect", status: "created", hasCodeVerifier: true, codeVerifierLength: 43 }
index-DahPL_yD.js:228:16755
17:37:07.405 🎯 Popup mode detected via window.opener index-DahPL_yD.js:258:12076
17:37:07.406 🔐 Page not safe for token refresh, disabling auto refresh: /oauth/callback index-DahPL_yD.js:265:22585
17:37:07.406 🔍 Popup mode detection started: 
Object { oauthPopupMode: null, oauthWindowType: null, oauthForceAccountSelection: null, windowOpener: true, windowParent: false, windowSize: "1867x543", pathname: "/oauth/callback", referrer: "https://maxlab.dwchem.co.kr/" }
index-DahPL_yD.js:258:10773
17:37:07.406 🔍 Searching for OAuth flow state with state: sso_refr... index-DahPL_yD.js:228:15101
17:37:07.406 📋 Found total flow states: 3 index-DahPL_yD.js:228:15218
17:37:07.406 ✅ Found OAuth flow state: 
Object { flowId: "me9pvmg3sf8maawhekd", flowType: "redirect", status: "created", hasCodeVerifier: true, codeVerifierLength: 43 }
index-DahPL_yD.js:228:16755
17:37:07.406 🎯 Popup mode detected via window.opener index-DahPL_yD.js:258:12076
17:37:07.406 🔍 OAuth Callback Mode Detection: 
Object { inPopupMode: true, isSilentAuth: false, hasCode: true, hasError: false, sessionKeys: (5) […] }
index-DahPL_yD.js:755:16034
17:37:07.406 🔍 OAuth Callback URL Analysis: 
Object { fullUrl: "https://maxlab.dwchem.co.kr/oauth/callback?code=tZNXfLBgQGKzOO2Dajn-gjmZqeERryi50R-EbKI5UpM&state=sso_refresh_1755074224227", pathname: "/oauth/callback", search: "?code=tZNXfLBgQGKzOO2Dajn-gjmZqeERryi50R-EbKI5UpM&state=sso_refresh_1755074224227", code: "tZNXfLBg...", state: "sso_refr...", error: null, errorDescription: null, allParams: {…} }
index-DahPL_yD.js:755:17032
17:37:07.406 🔄 SSO Token Refresh Callback Detected index-DahPL_yD.js:755:17413
17:37:07.406 🎯 OAuth Callback - Popup Mode Processing Started index-DahPL_yD.js:755:21234
17:37:07.406 🔍 Searching for OAuth flow state with state: sso_refr... index-DahPL_yD.js:228:15101
17:37:07.407 📋 Found total flow states: 4 index-DahPL_yD.js:228:15218
17:37:07.407 ✅ Found OAuth flow state: 
Object { flowId: "me9pvmg3sf8maawhekd", flowType: "redirect", status: "created", hasCodeVerifier: true, codeVerifierLength: 43 }
index-DahPL_yD.js:228:16755
17:37:07.407 🔍 Searching for OAuth flow state with state: sso_refr... index-DahPL_yD.js:228:15101
17:37:07.407 📋 Found total flow states: 4 index-DahPL_yD.js:228:15218
17:37:07.407 ✅ Found OAuth flow state: 
Object { flowId: "me9pvmg3sf8maawhekd", flowType: "redirect", status: "created", hasCodeVerifier: true, codeVerifierLength: 43 }
index-DahPL_yD.js:228:16755
17:37:07.407 🔐 OAuth State Validation Debug: 
Object { urlState: "sso_refr...", fullState: "sso_refresh_1755074224227", isForceAccountSelection: false, validationResult: {…}, flowState: {…}, inPopupMode: true, isSilentAuth: false, origin: "https://maxlab.dwchem.co.kr", sessionStorageOAuthKeys: (7) […] }
index-DahPL_yD.js:755:22514
17:37:07.407 ✅ OAuth State Validation Passed index-DahPL_yD.js:755:27180
17:37:07.407 🚨 Invalid OAuth flow status transition: 
Object { flowId: "me9pvmg3sf8maawhekd", currentStatus: "created", requestedStatus: "token_exchange" }
index-DahPL_yD.js:228:17697
17:37:07.407 💱 Starting token exchange for code: tZNXfLBg... index-DahPL_yD.js:755:27257
17:37:07.407 💱 Token exchange debug info: 
Object { hasState: true, stateValue: "sso_refr...", codeValue: "tZNXfLBg..." }
index-DahPL_yD.js:258:6192
17:37:07.407 🔍 Validating OAuth flow state... index-DahPL_yD.js:258:6340
17:37:07.407 🔍 Searching for OAuth flow state with state: sso_refr... index-DahPL_yD.js:228:15101
17:37:07.407 📋 Found total flow states: 4 index-DahPL_yD.js:228:15218
17:37:07.407 ✅ Found OAuth flow state: 
Object { flowId: "me9pvmg3sf8maawhekd", flowType: "redirect", status: "created", hasCodeVerifier: true, codeVerifierLength: 43 }
index-DahPL_yD.js:228:16755
17:37:07.407 🔐 OAuth flow validation result: 
Object { isValid: true, reason: "Flow state valid", securityLevel: "low", canProceed: true }
index-DahPL_yD.js:258:6406
17:37:07.407 ✅ OAuth flow validation passed, getting flow state... index-DahPL_yD.js:258:6908
17:37:07.407 🔍 Searching for OAuth flow state with state: sso_refr... index-DahPL_yD.js:228:15101
17:37:07.407 📋 Found total flow states: 4 index-DahPL_yD.js:228:15218
17:37:07.407 ✅ Found OAuth flow state: 
Object { flowId: "me9pvmg3sf8maawhekd", flowType: "redirect", status: "created", hasCodeVerifier: true, codeVerifierLength: 43 }
index-DahPL_yD.js:228:16755
17:37:07.407 🔍 Retrieved flow state: 
Object { flowId: "me9pvmg3sf8maawhekd", hasCodeVerifier: true, codeVerifierLength: 43, status: "created", flowType: "redirect" }
index-DahPL_yD.js:258:6985
17:37:07.407 🚨 Invalid OAuth flow status transition: 
Object { flowId: "me9pvmg3sf8maawhekd", currentStatus: "created", requestedStatus: "token_exchange" }
index-DahPL_yD.js:228:17697
17:37:07.407 🔐 Using code verifier from flow state: 
Object { flowId: "me9pvmg3sf8maawhekd", codeVerifierFound: true, codeVerifierLength: 43 }
index-DahPL_yD.js:258:7216
17:37:07.407 🔐 Starting token exchange with code: tZNXfLBg... index-DahPL_yD.js:258:8874
17:37:07.407 🔄 Calling OAuth token endpoint: https://max.dwchem.co.kr/api/oauth/token index-DahPL_yD.js:258:9053
17:37:07.409 🔍 Popup mode detection started: 
Object { oauthPopupMode: null, oauthWindowType: null, oauthForceAccountSelection: null, windowOpener: true, windowParent: false, windowSize: "1867x543", pathname: "/oauth/callback", referrer: "https://maxlab.dwchem.co.kr/" }
index-DahPL_yD.js:258:10773
17:37:07.409 🔍 Searching for OAuth flow state with state: sso_refr... index-DahPL_yD.js:228:15101
17:37:07.409 📋 Found total flow states: 4 index-DahPL_yD.js:228:15218
17:37:07.409 ✅ Found OAuth flow state: 
Object { flowId: "me9pvmg3sf8maawhekd", flowType: "redirect", status: "created", hasCodeVerifier: true, codeVerifierLength: 43 }
index-DahPL_yD.js:228:16755
17:37:07.410 XHRPOST
https://max.dwchem.co.kr/api/oauth/token
[HTTP/2 200  21ms]

17:37:07.410 🎯 Popup mode detected via window.opener index-DahPL_yD.js:258:12076
17:37:07.438 ✅ Token exchange successful index-DahPL_yD.js:258:10269
17:37:07.462 📋 Token response details: 
Object { hasAccessToken: true, hasRefreshToken: true, refreshExpiresIn: 2592000, tokenType: "Bearer", scope: "openid profile email read:profile read:groups manage:workflows" }
index-DahPL_yD.js:258:10342
17:37:07.463 🚨 Invalid OAuth flow status transition: 
Object { flowId: "me9pvmg3sf8maawhekd", currentStatus: "created", requestedStatus: "completed" }
index-DahPL_yD.js:228:17697
17:37:07.463 ✅ OAuth flow completed: me9pvmg3sf8maawhekd index-DahPL_yD.js:258:10556
17:37:07.463 ✅ Token exchange successful: 
Object { hasAccessToken: true, hasRefreshToken: true, tokenType: "Bearer", isSSORrefreshCallback: true }
index-DahPL_yD.js:755:27362
17:37:07.463 ✅ Processing successful SSO token refresh in popup mode... index-DahPL_yD.js:755:27525
17:37:07.463 ✅ SSO session metadata updated after successful token refresh index-DahPL_yD.js:755:27937
17:37:07.463 🚨 Invalid OAuth flow status transition: 
Object { flowId: "me9pvmg3sf8maawhekd", currentStatus: "created", requestedStatus: "completed" }
index-DahPL_yD.js:228:17697
17:37:07.463 📤 Preparing to send OAUTH_SUCCESS message... index-DahPL_yD.js:755:28570
17:37:07.463 Window opener exists: true index-DahPL_yD.js:755:28631
17:37:07.463 Window parent exists: true index-DahPL_yD.js:755:28684
17:37:07.463 Window top exists: true index-DahPL_yD.js:755:28737
17:37:07.463 Target origin: https://maxlab.dwchem.co.kr index-DahPL_yD.js:755:28784
17:37:07.463 Message payload: 
Object { type: "OAUTH_SUCCESS", token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyMWEyYWFhNy00NDRhLTQwMzgtYmRhMy1kOGJmMmM0ZWYxNjIiLCJlbWFpbCI6ImFkbWluQHRlc3QuY29tIiwiaXNfYWRtaW4iOnRydWUsInVzZXJfaWQiOiIyMWEyYWFhNy00NDRhLTQwMzgtYmRhMy1kOGJmMmM0ZWYxNjIiLCJncm91cF9pZCI6IjkzMmQ2NTdlLTU1ZGYtNDlkNy05Y2M1LWQ4NmU3NjIzZGY4ZSIsImdyb3VwX25hbWUiOiJcdWFkMDBcdWI5YWNcdWM3OTAiLCJyb2xlX2lkIjoiMSIsInJvbGVfbmFtZSI6ImFkbWluIiwiZXhwIjoxNzU1MDc0NDA3LCJ0eXBlIjoiYWNjZXNzIiwiaWF0IjoxNzU1MDc0MjI3LCJqdGkiOiI4NjBkMzZiMy04ZTYwLTRjOTktYTJjMy00YmFiYmNmNDhhNjMiLCJuYmYiOjE3NTUwNzQyMjcsImlzcyI6Im1heHBsYXRmb3JtIiwibm9uY2UiOiJmMjQzMzUxNTQyYWZhZjA5In0.t5YvRKGACrxu6CeWslWMhwxTITLMBzQkgTKqmopt888", tokenData: {…} }
index-DahPL_yD.js:755:28837
17:37:07.463 ✅ OAuth result pre-stored in sessionStorage for immediate detection index-DahPL_yD.js:755:29425
17:37:07.464 ✅ PostMessage sent to window.opener with origin: https://maxlab.dwchem.co.kr index-DahPL_yD.js:755:29831
17:37:07.464 ✅ BroadcastChannel message sent (attempt 1/3) index-DahPL_yD.js:755:30539
17:37:07.464 Failed to execute ‘postMessage’ on ‘DOMWindow’: The target origin provided (‘https://maxlab.dwchem.co.kr’) does not match the recipient window’s origin (‘https://max.dwchem.co.kr’). callback
17:37:07.564 ✅ BroadcastChannel message sent (attempt 2/3) index-DahPL_yD.js:755:30539
17:37:07.664 ✅ BroadcastChannel message sent (attempt 3/3) index-DahPL_yD.js:755:30539
17:37:07.665 📡 Sent message via BroadcastChannel index-DahPL_yD.js:755:31302
17:37:07.665 💾 Stored OAuth result in sessionStorage key: oauth_result index-DahPL_yD.js:755:31615
17:37:07.665 💾 Stored OAuth result in sessionStorage key: oauth_success index-DahPL_yD.js:755:31615
17:37:07.665 💾 Stored OAuth result in sessionStorage key: oauth_token_data index-DahPL_yD.js:755:31615
17:37:07.665 💾 Stored individual OAuth token data index-DahPL_yD.js:755:31894
17:37:07.665 🚪 Waiting for parent acknowledgment before closing popup... index-DahPL_yD.js:755:32154

3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,516 - app.core.security - ERROR - Decryption failed for connection string:
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,516 - app.core.security - ERROR - Connection string appears encrypted but decryption failed:
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,516 - app.services.data_providers.dynamic - ERROR - ❌ MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,516 - app.services.data_providers.dynamic - ERROR - ❌ Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,516 - app.routers.personal_test_process_flow - ERROR - ❌ Failed to connect to data source: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,516 - app.routers.personal_test_process_flow - ERROR - Error getting measurement data for public flow: 500: Cannot connect to data source for this flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,517 - app.routers.personal_test_process_flow - ERROR - Full traceback: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/app/services/data_providers/dynamic.py", line 210, in _get_provider
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     raise ValueError("MSSQL provider requires connection_string")
3|maxlab-backend-8010       | 2025-08-10T14:54:12: ValueError: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:12:
3|maxlab-backend-8010       | 2025-08-10T14:54:12: During handling of the above exception, another exception occurred:
3|maxlab-backend-8010       | 2025-08-10T14:54:12:
3|maxlab-backend-8010       | 2025-08-10T14:54:12: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 1031, in get_public_measurements
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     await provider.connect()
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/app/services/data_providers/dynamic.py", line 249, in connect
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     provider = await self._get_provider()
3|maxlab-backend-8010       | 2025-08-10T14:54:12:                ^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/app/services/data_providers/dynamic.py", line 243, in _get_provider
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     raise RuntimeError(f"Failed to create {source_type} provider: {e}")
3|maxlab-backend-8010       | 2025-08-10T14:54:12: RuntimeError: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:12:
3|maxlab-backend-8010       | 2025-08-10T14:54:12: During handling of the above exception, another exception occurred:
3|maxlab-backend-8010       | 2025-08-10T14:54:12:
3|maxlab-backend-8010       | 2025-08-10T14:54:12: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 1034, in get_public_measurements
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     raise HTTPException(
3|maxlab-backend-8010       | 2025-08-10T14:54:12: fastapi.exceptions.HTTPException: 500: Cannot connect to data source for this flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:12:
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,517 - app.core.database - ERROR - Database session error: 500: Failed to get measurement data: 500: Cannot connect to data source for this flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,518 - app.core.security - ERROR - Decryption failed for connection string:
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,518 - app.core.security - ERROR - Connection string appears encrypted but decryption failed:
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,518 - app.services.data_providers.dynamic - ERROR - ❌ MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,518 - app.services.data_providers.dynamic - ERROR - ❌ Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,518 - app.routers.personal_test_process_flow - ERROR - Error getting equipment status for public flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,518 - app.core.database - ERROR - Database session error: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:12: INFO:     192.168.15.220:0 - "GET /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs/measurements?_t=1754805252500 HTTP/1.1" 500 Internal Server Error
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,519 - app.main - ERROR - Unhandled exception: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:12: INFO:     192.168.15.220:0 - "GET /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs/equipment/status?_t=1754805252499 HTTP/1.1" 500 Internal Server Error
3|maxlab-backend-8010       | 2025-08-10T14:54:12: ERROR:    Exception in ASGI application
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   + Exception Group Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   |     yield
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 177, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   |     async with anyio.create_task_group() as task_group:
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   |     raise BaseExceptionGroup(
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   +-+---------------- 1 ----------------
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     | Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     result = await app(  # type: ignore[func-returns-value]
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     return await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     await super().__call__(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     await self.app(scope, receive, _send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 176, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     with recv_stream, send_stream, collapse_excgroups():
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/usr/lib/python3.11/contextlib.py", line 158, in __exit__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     self.gen.throw(typ, value, traceback)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 178, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     response = await self.dispatch_func(request, call_next)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/app/middleware/session_middleware.py", line 76, in dispatch
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     response = await call_next(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |                ^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 156, in call_next
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     raise app_exc
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 141, in coro
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     await self.app(scope, receive_or_disconnect, send_no_error)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 714, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 734, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     await route.handle(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     response = await f(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |                ^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     raw_response = await run_endpoint_function(
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     return await dependant.call(**values)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 938, in get_public_equipment_status
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |     status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     | AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     +------------------------------------
3|maxlab-backend-8010       | 2025-08-10T14:54:12:
3|maxlab-backend-8010       | 2025-08-10T14:54:12: During handling of the above exception, another exception occurred:
3|maxlab-backend-8010       | 2025-08-10T14:54:12:
3|maxlab-backend-8010       | 2025-08-10T14:54:12: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     result = await app(  # type: ignore[func-returns-value]
3|maxlab-backend-8010       | 2025-08-10T14:54:12:              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     return await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     await super().__call__(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     await self.app(scope, receive, _send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 176, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     with recv_stream, send_stream, collapse_excgroups():
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/usr/lib/python3.11/contextlib.py", line 158, in __exit__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     self.gen.throw(typ, value, traceback)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 178, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     response = await self.dispatch_func(request, call_next)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/app/middleware/session_middleware.py", line 76, in dispatch
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     response = await call_next(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:                ^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 156, in call_next
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     raise app_exc
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 141, in coro
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     await self.app(scope, receive_or_disconnect, send_no_error)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 714, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 734, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     await route.handle(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     response = await f(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:                ^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     raw_response = await run_endpoint_function(
3|maxlab-backend-8010       | 2025-08-10T14:54:12:                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     return await dependant.call(**values)
3|maxlab-backend-8010       | 2025-08-10T14:54:12:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12:   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 938, in get_public_equipment_status
3|maxlab-backend-8010       | 2025-08-10T14:54:12:     status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
3|maxlab-backend-8010       | 2025-08-10T14:54:12:                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:12: AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,547 - app.core.security - ERROR - Decryption failed for connection string:
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,547 - app.core.security - ERROR - Connection string appears encrypted but decryption failed:
3|maxlab-backend-8010       | 2025-08-10T14:54:12: 2025-08-10 14:54:12,547 - app.routers.personal_test_process_flow - ERROR - MSSQL connection string decryption returned None
3|maxlab-backend-8010       | 2025-08-10T14:54:12: INFO:     192.168.15.220:0 - "POST /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs/data-sources/2881a01f-1eed-4343-b0d1-5d8d22f6744a/execute-query HTTP/1.1" 200 OK
0|maxplatform-backend-8000  | 2025-08-10T14:54:13: 2025-08-10 14:54:13.466 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "GET /api/oauth/userinfo HTTP/1.1" 200
0|maxplatform-backend-8000  | 2025-08-10T14:54:13: 2025-08-10 14:54:13.668 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "GET /api/oauth/userinfo HTTP/1.1" 200
0|maxplatform-backend-8000  | 2025-08-10T14:54:14: 2025-08-10 14:54:14.467 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "GET /api/oauth/userinfo HTTP/1.1" 200
3|maxlab-backend-8010       | 2025-08-10T14:54:14: INFO:     192.168.15.220:0 - "GET /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs?_t=1754805254527&_r=9jzogfck9 HTTP/1.1" 200 OK
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,542 - app.core.security - ERROR - Decryption failed for connection string:
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,542 - app.core.security - ERROR - Connection string appears encrypted but decryption failed:
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,542 - app.services.data_providers.dynamic - ERROR - ❌ MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,542 - app.services.data_providers.dynamic - ERROR - ❌ Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,542 - app.routers.personal_test_process_flow - ERROR - Error getting equipment status for public flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,542 - app.core.database - ERROR - Database session error: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,542 - app.core.security - ERROR - Decryption failed for connection string:
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,543 - app.core.security - ERROR - Connection string appears encrypted but decryption failed:
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,543 - app.services.data_providers.dynamic - ERROR - ❌ MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,543 - app.services.data_providers.dynamic - ERROR - ❌ Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,543 - app.routers.personal_test_process_flow - ERROR - ❌ Failed to connect to data source: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,543 - app.routers.personal_test_process_flow - ERROR - Error getting measurement data for public flow: 500: Cannot connect to data source for this flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,543 - app.routers.personal_test_process_flow - ERROR - Full traceback: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/app/services/data_providers/dynamic.py", line 210, in _get_provider
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     raise ValueError("MSSQL provider requires connection_string")
3|maxlab-backend-8010       | 2025-08-10T14:54:14: ValueError: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:14:
3|maxlab-backend-8010       | 2025-08-10T14:54:14: During handling of the above exception, another exception occurred:
3|maxlab-backend-8010       | 2025-08-10T14:54:14:
3|maxlab-backend-8010       | 2025-08-10T14:54:14: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 1031, in get_public_measurements
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     await provider.connect()
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/app/services/data_providers/dynamic.py", line 249, in connect
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     provider = await self._get_provider()
3|maxlab-backend-8010       | 2025-08-10T14:54:14:                ^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/app/services/data_providers/dynamic.py", line 243, in _get_provider
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     raise RuntimeError(f"Failed to create {source_type} provider: {e}")
3|maxlab-backend-8010       | 2025-08-10T14:54:14: RuntimeError: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:14:
3|maxlab-backend-8010       | 2025-08-10T14:54:14: During handling of the above exception, another exception occurred:
3|maxlab-backend-8010       | 2025-08-10T14:54:14:
3|maxlab-backend-8010       | 2025-08-10T14:54:14: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 1034, in get_public_measurements
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     raise HTTPException(
3|maxlab-backend-8010       | 2025-08-10T14:54:14: fastapi.exceptions.HTTPException: 500: Cannot connect to data source for this flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:14:
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,543 - app.core.database - ERROR - Database session error: 500: Failed to get measurement data: 500: Cannot connect to data source for this flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,544 - app.main - ERROR - Unhandled exception: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:14: INFO:     192.168.15.220:0 - "GET /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs/equipment/status?_t=1754805254536 HTTP/1.1" 500 Internal Server Error
3|maxlab-backend-8010       | 2025-08-10T14:54:14: ERROR:    Exception in ASGI application
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   + Exception Group Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   |     yield
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 177, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   |     async with anyio.create_task_group() as task_group:
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   |     raise BaseExceptionGroup(
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   +-+---------------- 1 ----------------
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     | Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     result = await app(  # type: ignore[func-returns-value]
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     return await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     await super().__call__(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     await self.app(scope, receive, _send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 176, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     with recv_stream, send_stream, collapse_excgroups():
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/usr/lib/python3.11/contextlib.py", line 158, in __exit__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     self.gen.throw(typ, value, traceback)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 178, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     response = await self.dispatch_func(request, call_next)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/app/middleware/session_middleware.py", line 76, in dispatch
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     response = await call_next(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |                ^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 156, in call_next
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     raise app_exc
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 141, in coro
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     await self.app(scope, receive_or_disconnect, send_no_error)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 714, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 734, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     await route.handle(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     response = await f(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |                ^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     raw_response = await run_endpoint_function(
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     return await dependant.call(**values)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 938, in get_public_equipment_status
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |     status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     | AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     +------------------------------------
3|maxlab-backend-8010       | 2025-08-10T14:54:14:
3|maxlab-backend-8010       | 2025-08-10T14:54:14: During handling of the above exception, another exception occurred:
3|maxlab-backend-8010       | 2025-08-10T14:54:14:
3|maxlab-backend-8010       | 2025-08-10T14:54:14: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     result = await app(  # type: ignore[func-returns-value]
3|maxlab-backend-8010       | 2025-08-10T14:54:14:              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     return await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     await super().__call__(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     await self.app(scope, receive, _send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 176, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     with recv_stream, send_stream, collapse_excgroups():
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/usr/lib/python3.11/contextlib.py", line 158, in __exit__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     self.gen.throw(typ, value, traceback)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 178, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     response = await self.dispatch_func(request, call_next)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/app/middleware/session_middleware.py", line 76, in dispatch
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     response = await call_next(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:                ^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 156, in call_next
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     raise app_exc
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 141, in coro
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     await self.app(scope, receive_or_disconnect, send_no_error)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 714, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 734, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     await route.handle(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     response = await f(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:                ^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     raw_response = await run_endpoint_function(
3|maxlab-backend-8010       | 2025-08-10T14:54:14:                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     return await dependant.call(**values)
3|maxlab-backend-8010       | 2025-08-10T14:54:14:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14:   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 938, in get_public_equipment_status
3|maxlab-backend-8010       | 2025-08-10T14:54:14:     status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
3|maxlab-backend-8010       | 2025-08-10T14:54:14:                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:14: AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:14: INFO:     192.168.15.220:0 - "GET /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs/measurements?_t=1754805254536 HTTP/1.1" 500 Internal Server Error
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,564 - app.core.security - ERROR - Decryption failed for connection string:
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,564 - app.core.security - ERROR - Connection string appears encrypted but decryption failed:
3|maxlab-backend-8010       | 2025-08-10T14:54:14: 2025-08-10 14:54:14,564 - app.routers.personal_test_process_flow - ERROR - MSSQL connection string decryption returned None
3|maxlab-backend-8010       | 2025-08-10T14:54:14: INFO:     192.168.15.220:0 - "POST /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs/data-sources/2881a01f-1eed-4343-b0d1-5d8d22f6744a/execute-query HTTP/1.1" 200 OK
0|maxplatform-backend-8000  | 2025-08-10T14:54:14: 2025-08-10 14:54:14.675 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "GET /api/oauth/userinfo HTTP/1.1" 200
0|maxplatform-backend-8000  | 2025-08-10T14:54:15: 2025-08-10 14:54:15.468 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "GET /api/oauth/userinfo HTTP/1.1" 200
0|maxplatform-backend-8000  | 2025-08-10T14:54:15: 2025-08-10 14:54:15.675 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "GET /api/oauth/userinfo HTTP/1.1" 200
0|maxplatform-backend-8000  | 2025-08-10T14:54:16: 2025-08-10 14:54:16.467 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "GET /api/oauth/userinfo HTTP/1.1" 200
3|maxlab-backend-8010       | 2025-08-10T14:54:16: INFO:     192.168.15.220:0 - "GET /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs?_t=1754805256548&_r=upia95br4d HTTP/1.1" 200 OK
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,561 - app.core.security - ERROR - Decryption failed for connection string:
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,561 - app.core.security - ERROR - Connection string appears encrypted but decryption failed:
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,561 - app.services.data_providers.dynamic - ERROR - ❌ MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,561 - app.services.data_providers.dynamic - ERROR - ❌ Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,561 - app.routers.personal_test_process_flow - ERROR - Error getting equipment status for public flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,561 - app.core.database - ERROR - Database session error: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,562 - app.core.security - ERROR - Decryption failed for connection string:
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,562 - app.core.security - ERROR - Connection string appears encrypted but decryption failed:
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,562 - app.services.data_providers.dynamic - ERROR - ❌ MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,562 - app.services.data_providers.dynamic - ERROR - ❌ Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,562 - app.routers.personal_test_process_flow - ERROR - ❌ Failed to connect to data source: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,562 - app.routers.personal_test_process_flow - ERROR - Error getting measurement data for public flow: 500: Cannot connect to data source for this flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,562 - app.routers.personal_test_process_flow - ERROR - Full traceback: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/app/services/data_providers/dynamic.py", line 210, in _get_provider
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     raise ValueError("MSSQL provider requires connection_string")
3|maxlab-backend-8010       | 2025-08-10T14:54:16: ValueError: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:16:
3|maxlab-backend-8010       | 2025-08-10T14:54:16: During handling of the above exception, another exception occurred:
3|maxlab-backend-8010       | 2025-08-10T14:54:16:
3|maxlab-backend-8010       | 2025-08-10T14:54:16: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 1031, in get_public_measurements
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     await provider.connect()
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/app/services/data_providers/dynamic.py", line 249, in connect
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     provider = await self._get_provider()
3|maxlab-backend-8010       | 2025-08-10T14:54:16:                ^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/app/services/data_providers/dynamic.py", line 243, in _get_provider
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     raise RuntimeError(f"Failed to create {source_type} provider: {e}")
3|maxlab-backend-8010       | 2025-08-10T14:54:16: RuntimeError: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:16:
3|maxlab-backend-8010       | 2025-08-10T14:54:16: During handling of the above exception, another exception occurred:
3|maxlab-backend-8010       | 2025-08-10T14:54:16:
3|maxlab-backend-8010       | 2025-08-10T14:54:16: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 1034, in get_public_measurements
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     raise HTTPException(
3|maxlab-backend-8010       | 2025-08-10T14:54:16: fastapi.exceptions.HTTPException: 500: Cannot connect to data source for this flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:16:
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,562 - app.core.database - ERROR - Database session error: 500: Failed to get measurement data: 500: Cannot connect to data source for this flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,563 - app.main - ERROR - Unhandled exception: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:16: INFO:     192.168.15.220:0 - "GET /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs/equipment/status?_t=1754805256556 HTTP/1.1" 500 Internal Server Error
3|maxlab-backend-8010       | 2025-08-10T14:54:16: ERROR:    Exception in ASGI application
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   + Exception Group Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   |     yield
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 177, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   |     async with anyio.create_task_group() as task_group:
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   |     raise BaseExceptionGroup(
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   +-+---------------- 1 ----------------
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     | Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     result = await app(  # type: ignore[func-returns-value]
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     return await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     await super().__call__(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     await self.app(scope, receive, _send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 176, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     with recv_stream, send_stream, collapse_excgroups():
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/usr/lib/python3.11/contextlib.py", line 158, in __exit__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     self.gen.throw(typ, value, traceback)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 178, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     response = await self.dispatch_func(request, call_next)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/app/middleware/session_middleware.py", line 76, in dispatch
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     response = await call_next(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |                ^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 156, in call_next
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     raise app_exc
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 141, in coro
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     await self.app(scope, receive_or_disconnect, send_no_error)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 714, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 734, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     await route.handle(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     response = await f(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |                ^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     raw_response = await run_endpoint_function(
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     return await dependant.call(**values)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 938, in get_public_equipment_status
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |     status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     | AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     +------------------------------------
3|maxlab-backend-8010       | 2025-08-10T14:54:16:
3|maxlab-backend-8010       | 2025-08-10T14:54:16: During handling of the above exception, another exception occurred:
3|maxlab-backend-8010       | 2025-08-10T14:54:16:
3|maxlab-backend-8010       | 2025-08-10T14:54:16: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     result = await app(  # type: ignore[func-returns-value]
3|maxlab-backend-8010       | 2025-08-10T14:54:16:              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     return await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     await super().__call__(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     await self.app(scope, receive, _send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 176, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     with recv_stream, send_stream, collapse_excgroups():
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/usr/lib/python3.11/contextlib.py", line 158, in __exit__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     self.gen.throw(typ, value, traceback)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 178, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     response = await self.dispatch_func(request, call_next)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/app/middleware/session_middleware.py", line 76, in dispatch
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     response = await call_next(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:                ^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 156, in call_next
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     raise app_exc
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 141, in coro
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     await self.app(scope, receive_or_disconnect, send_no_error)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 714, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 734, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     await route.handle(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     response = await f(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:                ^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     raw_response = await run_endpoint_function(
3|maxlab-backend-8010       | 2025-08-10T14:54:16:                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     return await dependant.call(**values)
3|maxlab-backend-8010       | 2025-08-10T14:54:16:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16:   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 938, in get_public_equipment_status
3|maxlab-backend-8010       | 2025-08-10T14:54:16:     status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
3|maxlab-backend-8010       | 2025-08-10T14:54:16:                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:16: AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:16: INFO:     192.168.15.220:0 - "GET /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs/measurements?_t=1754805256557 HTTP/1.1" 500 Internal Server Error
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,581 - app.core.security - ERROR - Decryption failed for connection string:
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,581 - app.core.security - ERROR - Connection string appears encrypted but decryption failed:
3|maxlab-backend-8010       | 2025-08-10T14:54:16: 2025-08-10 14:54:16,581 - app.routers.personal_test_process_flow - ERROR - MSSQL connection string decryption returned None
3|maxlab-backend-8010       | 2025-08-10T14:54:16: INFO:     192.168.15.220:0 - "POST /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs/data-sources/2881a01f-1eed-4343-b0d1-5d8d22f6744a/execute-query HTTP/1.1" 200 OK
0|maxplatform-backend-8000  | 2025-08-10T14:54:16: 2025-08-10 14:54:16.695 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "GET /api/oauth/userinfo HTTP/1.1" 200
0|maxplatform-backend-8000  | 2025-08-10T14:54:17: 2025-08-10 14:54:17.490 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "GET /api/oauth/userinfo HTTP/1.1" 200
0|maxplatform-backend-8000  | 2025-08-10T14:54:17: 2025-08-10 14:54:17.695 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "GET /api/oauth/userinfo HTTP/1.1" 200
0|maxplatform-backend-8000  | 2025-08-10T14:54:18: 2025-08-10 14:54:18.490 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "GET /api/oauth/userinfo HTTP/1.1" 200
3|maxlab-backend-8010       | 2025-08-10T14:54:18: INFO:     192.168.15.220:0 - "GET /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs?_t=1754805258568&_r=m6gt039bq3j HTTP/1.1" 200 OK
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,583 - app.core.security - ERROR - Decryption failed for connection string:
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,583 - app.core.security - ERROR - Connection string appears encrypted but decryption failed:
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,583 - app.services.data_providers.dynamic - ERROR - ❌ MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,583 - app.services.data_providers.dynamic - ERROR - ❌ Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,583 - app.routers.personal_test_process_flow - ERROR - Error getting equipment status for public flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,583 - app.core.database - ERROR - Database session error: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,583 - app.core.security - ERROR - Decryption failed for connection string:
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,583 - app.core.security - ERROR - Connection string appears encrypted but decryption failed:
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,583 - app.services.data_providers.dynamic - ERROR - ❌ MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,583 - app.services.data_providers.dynamic - ERROR - ❌ Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,583 - app.routers.personal_test_process_flow - ERROR - ❌ Failed to connect to data source: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,583 - app.routers.personal_test_process_flow - ERROR - Error getting measurement data for public flow: 500: Cannot connect to data source for this flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,584 - app.routers.personal_test_process_flow - ERROR - Full traceback: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/app/services/data_providers/dynamic.py", line 210, in _get_provider
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     raise ValueError("MSSQL provider requires connection_string")
3|maxlab-backend-8010       | 2025-08-10T14:54:18: ValueError: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:18:
3|maxlab-backend-8010       | 2025-08-10T14:54:18: During handling of the above exception, another exception occurred:
3|maxlab-backend-8010       | 2025-08-10T14:54:18:
3|maxlab-backend-8010       | 2025-08-10T14:54:18: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 1031, in get_public_measurements
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     await provider.connect()
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/app/services/data_providers/dynamic.py", line 249, in connect
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     provider = await self._get_provider()
3|maxlab-backend-8010       | 2025-08-10T14:54:18:                ^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/app/services/data_providers/dynamic.py", line 243, in _get_provider
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     raise RuntimeError(f"Failed to create {source_type} provider: {e}")
3|maxlab-backend-8010       | 2025-08-10T14:54:18: RuntimeError: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:18:
3|maxlab-backend-8010       | 2025-08-10T14:54:18: During handling of the above exception, another exception occurred:
3|maxlab-backend-8010       | 2025-08-10T14:54:18:
3|maxlab-backend-8010       | 2025-08-10T14:54:18: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 1034, in get_public_measurements
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     raise HTTPException(
3|maxlab-backend-8010       | 2025-08-10T14:54:18: fastapi.exceptions.HTTPException: 500: Cannot connect to data source for this flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:18:
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,584 - app.core.database - ERROR - Database session error: 500: Failed to get measurement data: 500: Cannot connect to data source for this flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,584 - app.main - ERROR - Unhandled exception: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:18: INFO:     192.168.15.220:0 - "GET /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs/equipment/status?_t=1754805258576 HTTP/1.1" 500 Internal Server Error
3|maxlab-backend-8010       | 2025-08-10T14:54:18: ERROR:    Exception in ASGI application
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   + Exception Group Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   |     yield
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 177, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   |     async with anyio.create_task_group() as task_group:
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   |     raise BaseExceptionGroup(
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   +-+---------------- 1 ----------------
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     | Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     result = await app(  # type: ignore[func-returns-value]
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     return await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     await super().__call__(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     await self.app(scope, receive, _send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 176, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     with recv_stream, send_stream, collapse_excgroups():
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/usr/lib/python3.11/contextlib.py", line 158, in __exit__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     self.gen.throw(typ, value, traceback)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 178, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     response = await self.dispatch_func(request, call_next)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/app/middleware/session_middleware.py", line 76, in dispatch
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     response = await call_next(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |                ^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 156, in call_next
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     raise app_exc
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 141, in coro
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     await self.app(scope, receive_or_disconnect, send_no_error)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 714, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 734, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     await route.handle(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     response = await f(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |                ^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     raw_response = await run_endpoint_function(
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     return await dependant.call(**values)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 938, in get_public_equipment_status
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |     status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     | AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     +------------------------------------
3|maxlab-backend-8010       | 2025-08-10T14:54:18:
3|maxlab-backend-8010       | 2025-08-10T14:54:18: During handling of the above exception, another exception occurred:
3|maxlab-backend-8010       | 2025-08-10T14:54:18:
3|maxlab-backend-8010       | 2025-08-10T14:54:18: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     result = await app(  # type: ignore[func-returns-value]
3|maxlab-backend-8010       | 2025-08-10T14:54:18:              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     return await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     await super().__call__(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     await self.app(scope, receive, _send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 176, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     with recv_stream, send_stream, collapse_excgroups():
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/usr/lib/python3.11/contextlib.py", line 158, in __exit__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     self.gen.throw(typ, value, traceback)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 178, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     response = await self.dispatch_func(request, call_next)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/app/middleware/session_middleware.py", line 76, in dispatch
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     response = await call_next(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:                ^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 156, in call_next
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     raise app_exc
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 141, in coro
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     await self.app(scope, receive_or_disconnect, send_no_error)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 714, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 734, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     await route.handle(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     response = await f(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:                ^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     raw_response = await run_endpoint_function(
3|maxlab-backend-8010       | 2025-08-10T14:54:18:                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     return await dependant.call(**values)
3|maxlab-backend-8010       | 2025-08-10T14:54:18:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18:   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 938, in get_public_equipment_status
3|maxlab-backend-8010       | 2025-08-10T14:54:18:     status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
3|maxlab-backend-8010       | 2025-08-10T14:54:18:                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:18: AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:18: INFO:     192.168.15.220:0 - "GET /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs/measurements?_t=1754805258576 HTTP/1.1" 500 Internal Server Error
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,601 - app.core.security - ERROR - Decryption failed for connection string:
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,601 - app.core.security - ERROR - Connection string appears encrypted but decryption failed:
3|maxlab-backend-8010       | 2025-08-10T14:54:18: 2025-08-10 14:54:18,601 - app.routers.personal_test_process_flow - ERROR - MSSQL connection string decryption returned None
3|maxlab-backend-8010       | 2025-08-10T14:54:18: INFO:     192.168.15.220:0 - "POST /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs/data-sources/2881a01f-1eed-4343-b0d1-5d8d22f6744a/execute-query HTTP/1.1" 200 OK
0|maxplatform-backend-8000  | 2025-08-10T14:54:18: 2025-08-10 14:54:18.714 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "GET /api/oauth/userinfo HTTP/1.1" 200
0|maxplatform-backend-8000  | 2025-08-10T14:54:19: 2025-08-10 14:54:19.498 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "GET /api/oauth/userinfo HTTP/1.1" 200
0|maxplatform-backend-8000  | 2025-08-10T14:54:19: 2025-08-10 14:54:19.714 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "GET /api/oauth/userinfo HTTP/1.1" 200
0|maxplatform-backend-8000  | 2025-08-10T14:54:20: 2025-08-10 14:54:20.506 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "GET /api/oauth/userinfo HTTP/1.1" 200
3|maxlab-backend-8010       | 2025-08-10T14:54:20: INFO:     192.168.15.220:0 - "GET /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs?_t=1754805260589&_r=8imcb0wld9h HTTP/1.1" 200 OK
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,605 - app.core.security - ERROR - Decryption failed for connection string:
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,605 - app.core.security - ERROR - Connection string appears encrypted but decryption failed:
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,605 - app.services.data_providers.dynamic - ERROR - ❌ MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,605 - app.services.data_providers.dynamic - ERROR - ❌ Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,605 - app.routers.personal_test_process_flow - ERROR - Error getting equipment status for public flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,605 - app.core.database - ERROR - Database session error: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,605 - app.core.security - ERROR - Decryption failed for connection string:
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,605 - app.core.security - ERROR - Connection string appears encrypted but decryption failed:
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,605 - app.services.data_providers.dynamic - ERROR - ❌ MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,605 - app.services.data_providers.dynamic - ERROR - ❌ Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,605 - app.routers.personal_test_process_flow - ERROR - ❌ Failed to connect to data source: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,605 - app.routers.personal_test_process_flow - ERROR - Error getting measurement data for public flow: 500: Cannot connect to data source for this flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,606 - app.routers.personal_test_process_flow - ERROR - Full traceback: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/app/services/data_providers/dynamic.py", line 210, in _get_provider
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     raise ValueError("MSSQL provider requires connection_string")
3|maxlab-backend-8010       | 2025-08-10T14:54:20: ValueError: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:20:
3|maxlab-backend-8010       | 2025-08-10T14:54:20: During handling of the above exception, another exception occurred:
3|maxlab-backend-8010       | 2025-08-10T14:54:20:
3|maxlab-backend-8010       | 2025-08-10T14:54:20: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 1031, in get_public_measurements
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     await provider.connect()
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/app/services/data_providers/dynamic.py", line 249, in connect
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     provider = await self._get_provider()
3|maxlab-backend-8010       | 2025-08-10T14:54:20:                ^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/app/services/data_providers/dynamic.py", line 243, in _get_provider
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     raise RuntimeError(f"Failed to create {source_type} provider: {e}")
3|maxlab-backend-8010       | 2025-08-10T14:54:20: RuntimeError: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:20:
3|maxlab-backend-8010       | 2025-08-10T14:54:20: During handling of the above exception, another exception occurred:
3|maxlab-backend-8010       | 2025-08-10T14:54:20:
3|maxlab-backend-8010       | 2025-08-10T14:54:20: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 1034, in get_public_measurements
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     raise HTTPException(
3|maxlab-backend-8010       | 2025-08-10T14:54:20: fastapi.exceptions.HTTPException: 500: Cannot connect to data source for this flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:20:
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,606 - app.core.database - ERROR - Database session error: 500: Failed to get measurement data: 500: Cannot connect to data source for this flow: Failed to create mssql provider: MSSQL provider requires connection_string
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,606 - app.main - ERROR - Unhandled exception: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:20: INFO:     192.168.15.220:0 - "GET /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs/equipment/status?_t=1754805260599 HTTP/1.1" 500 Internal Server Error
3|maxlab-backend-8010       | 2025-08-10T14:54:20: ERROR:    Exception in ASGI application
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   + Exception Group Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   |     yield
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 177, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   |     async with anyio.create_task_group() as task_group:
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   |     raise BaseExceptionGroup(
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   +-+---------------- 1 ----------------
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     | Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     result = await app(  # type: ignore[func-returns-value]
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     return await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     await super().__call__(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     await self.app(scope, receive, _send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 176, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     with recv_stream, send_stream, collapse_excgroups():
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/usr/lib/python3.11/contextlib.py", line 158, in __exit__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     self.gen.throw(typ, value, traceback)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 178, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     response = await self.dispatch_func(request, call_next)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/app/middleware/session_middleware.py", line 76, in dispatch
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     response = await call_next(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |                ^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 156, in call_next
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     raise app_exc
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 141, in coro
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     await self.app(scope, receive_or_disconnect, send_no_error)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 714, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 734, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     await route.handle(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     response = await f(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |                ^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     raw_response = await run_endpoint_function(
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     return await dependant.call(**values)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 938, in get_public_equipment_status
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |     status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     | AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     +------------------------------------
3|maxlab-backend-8010       | 2025-08-10T14:54:20:
3|maxlab-backend-8010       | 2025-08-10T14:54:20: During handling of the above exception, another exception occurred:
3|maxlab-backend-8010       | 2025-08-10T14:54:20:
3|maxlab-backend-8010       | 2025-08-10T14:54:20: Traceback (most recent call last):
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     result = await app(  # type: ignore[func-returns-value]
3|maxlab-backend-8010       | 2025-08-10T14:54:20:              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     return await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     await super().__call__(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     await self.app(scope, receive, _send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 176, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     with recv_stream, send_stream, collapse_excgroups():
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/usr/lib/python3.11/contextlib.py", line 158, in __exit__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     self.gen.throw(typ, value, traceback)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 178, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     response = await self.dispatch_func(request, call_next)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/app/middleware/session_middleware.py", line 76, in dispatch
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     response = await call_next(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:                ^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 156, in call_next
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     raise app_exc
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/base.py", line 141, in coro
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     await self.app(scope, receive_or_disconnect, send_no_error)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 714, in __call__
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     await self.middleware_stack(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 734, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     await route.handle(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     await self.app(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     raise exc
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     await app(scope, receive, sender)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     response = await f(request)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:                ^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     raw_response = await run_endpoint_function(
3|maxlab-backend-8010       | 2025-08-10T14:54:20:                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     return await dependant.call(**values)
3|maxlab-backend-8010       | 2025-08-10T14:54:20:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20:   File "/home/app-user/maxproject/maxlab/backend/app/routers/personal_test_process_flow.py", line 938, in get_public_equipment_status
3|maxlab-backend-8010       | 2025-08-10T14:54:20:     status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
3|maxlab-backend-8010       | 2025-08-10T14:54:20:                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
3|maxlab-backend-8010       | 2025-08-10T14:54:20: AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
3|maxlab-backend-8010       | 2025-08-10T14:54:20: INFO:     192.168.15.220:0 - "GET /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs/measurements?_t=1754805260600 HTTP/1.1" 500 Internal Server Error
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,629 - app.core.security - ERROR - Decryption failed for connection string:
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,629 - app.core.security - ERROR - Connection string appears encrypted but decryption failed:
3|maxlab-backend-8010       | 2025-08-10T14:54:20: 2025-08-10 14:54:20,630 - app.routers.personal_test_process_flow - ERROR - MSSQL connection string decryption returned None
3|maxlab-backend-8010       | 2025-08-10T14:54:20: INFO:     192.168.15.220:0 - "POST /api/v1/personal-test/process-flow/public/I44anriCP7JjtoSkAFHILWeNTr9qM4nMzNxcU2s44Xs/data-sources/2881a01f-1eed-4343-b0d1-5d8d22f6744a/execute-query HTTP/1.1" 200 OK

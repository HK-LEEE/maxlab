backend error

0|maxplatform-backend-8000  | 2025-08-11T10:03:15: 2025-08-11 10:03:15.238 [INFO] app.utils.auth:259 - Successfully authenticated user: 21a2aaa7-444a-4038-bda3-d8bf2c4ef162
0|maxplatform-backend-8000  | 2025-08-11T10:03:15: 2025-08-11 10:03:15.240 [INFO] app.middleware.security:376 - AUDIT_LOG: {"timestamp": "2025-08-11T01:03:15.240246", "action_type": "user_session_logout", "user_id": "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", "user_email": "admin@test.com", "success": false, "error_message": "(psycopg2.errors.SyntaxError) syntax error at or near \":\"\nLINE 4:                 WHERE user_id = ANY(:user_ids::uuid[]) \n                                            ^\n\n[SQL: \n                UPDATE oauth_access_tokens \n                SET revoked_at = NOW() \n                WHERE user_id = ANY(:user_ids::uuid[]) \n                AND revoked_at IS NULL\n            ]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "execution_time": 0.000499, "request_data": {"request": {"logout_type": "all", "reason": "User requested all logout via simplified UI"}}}
0|maxplatform-backend-8000  | 2025-08-11T10:03:15: 2025-08-11 10:03:15.240 [ERROR] app.database:99 - SQLAlchemy 오류: (psycopg2.errors.SyntaxError) syntax error at or near ":"
0|maxplatform-backend-8000  | 2025-08-11T10:03:15: LINE 4:                 WHERE user_id = ANY(:user_ids::uuid[]) 
0|maxplatform-backend-8000  | 2025-08-11T10:03:15:                                             ^
0|maxplatform-backend-8000  | 2025-08-11T10:03:15: 
0|maxplatform-backend-8000  | 2025-08-11T10:03:15: [SQL: 
0|maxplatform-backend-8000  | 2025-08-11T10:03:15:                 UPDATE oauth_access_tokens 
0|maxplatform-backend-8000  | 2025-08-11T10:03:15:                 SET revoked_at = NOW() 
0|maxplatform-backend-8000  | 2025-08-11T10:03:15:                 WHERE user_id = ANY(:user_ids::uuid[]) 
0|maxplatform-backend-8000  | 2025-08-11T10:03:15:                 AND revoked_at IS NULL
0|maxplatform-backend-8000  | 2025-08-11T10:03:15:             ]
0|maxplatform-backend-8000  | 2025-08-11T10:03:15: (Background on this error at: https://sqlalche.me/e/20/f405)





>pulbic monitoring login
VM5 index-LSVyaUlf.js:228 🔄 Rehydrating auth state for initialization Object
VM5 index-LSVyaUlf.js:228 🆕 New or unauthenticated user, preparing for silent auth attempt
VM5 index-LSVyaUlf.js:263 🛡️ New CSRF token generated
VM5 index-LSVyaUlf.js:263 🛡️ CSRF protection initialized with new token
VM5 index-LSVyaUlf.js:263 🔀 OAuth Coordinator [01:05:02][Q:0|A:0]: 🏗️ OAuth Request Coordinator initialized
LTgjL5Ae6k4yt_FHd5vG64IABzOZdOkYfisG39PDz3s:1 [GroupMarkerNotSet(crbug.com/242999)!:A0302800443D0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.
VM5 index-LSVyaUlf.js:263 ✅ Auth sync initialized with BroadcastChannel
VM5 index-LSVyaUlf.js:846 🔒 Initializing cross-domain logout listener
VM5 index-LSVyaUlf.js:846 📡 SSO: PostMessage listener registered
VM5 index-LSVyaUlf.js:227 🔄 Auth state change: idle → silent_auth Object
VM5 index-LSVyaUlf.js:265 🔇 Attempting silent SSO login...
VM5 index-LSVyaUlf.js:263 🔀 OAuth Coordinator [01:05:02][Q:0|A:0]: 📝 Queuing silent_login request: silent_login_1754874302229_3dsjjb17x Object
VM5 index-LSVyaUlf.js:258 ✅ Silent auth conditions met, starting...
VM5 index-LSVyaUlf.js:263 🔀 OAuth Coordinator [01:05:02][Q:1|A:0]: 🔄 Starting OAuth request queue processing
VM5 index-LSVyaUlf.js:263 🔀 OAuth Coordinator [01:05:02][Q:1|A:1]: 🚀 Processing silent_login request: silent_login_1754874302229_3dsjjb17x
VM5 index-LSVyaUlf.js:258 🔇 Starting silent authentication...
favicon.ico:1  Failed to load resource: the server responded with a status of 404 ()
VM5 index-LSVyaUlf.js:228 🔄 Rehydrating auth state for initialization Object
VM5 index-LSVyaUlf.js:228 🆕 New or unauthenticated user, preparing for silent auth attempt
VM5 index-LSVyaUlf.js:263 🛡️ CSRF protection initialized with existing token
VM5 index-LSVyaUlf.js:263 🔀 OAuth Coordinator [01:05:02][Q:0|A:0]: 🏗️ OAuth Request Coordinator initialized
callback:1 [GroupMarkerNotSet(crbug.com/242999)!:A0902800443D0000]Automatic fallback to software WebGL has been deprecated. Please use the --enable-unsafe-swiftshader (about:flags#enable-unsafe-swiftshader) flag to opt in to lower security guarantees for trusted content.
VM5 index-LSVyaUlf.js:263 ✅ Auth sync initialized with BroadcastChannel
VM5 index-LSVyaUlf.js:846 🔒 Initializing cross-domain logout listener
VM5 index-LSVyaUlf.js:846 📡 SSO: PostMessage listener registered
VM5 index-LSVyaUlf.js:227 🔄 Auth state change: idle → silent_auth Object
VM5 index-LSVyaUlf.js:265 🔇 Attempting silent SSO login...
VM5 index-LSVyaUlf.js:263 🔀 OAuth Coordinator [01:05:02][Q:0|A:0]: 📝 Queuing silent_login request: silent_login_1754874302285_c5hdmn420 Object
VM5 index-LSVyaUlf.js:258 🚫 Unsafe path for token refresh: /oauth/callback
VM5 index-LSVyaUlf.js:258 🚫 Silent auth not allowed on current page: /oauth/callback
VM5 index-LSVyaUlf.js:263 🔀 OAuth Coordinator [01:05:02][Q:1|A:0]: 🔄 Starting OAuth request queue processing
VM5 index-LSVyaUlf.js:263 🔀 OAuth Coordinator [01:05:02][Q:1|A:1]: 🚀 Processing silent_login request: silent_login_1754874302285_c5hdmn420
VM5 index-LSVyaUlf.js:263 🔀 OAuth Coordinator [01:05:02][Q:1|A:0]: ✅ silent_login request completed: silent_login_1754874302285_c5hdmn420
VM5 index-LSVyaUlf.js:265 ℹ️ Silent SSO login failed: Cannot attempt silent auth on current page
VM5 index-LSVyaUlf.js:227 🔄 Auth state change: silent_auth → ready Object
VM5 index-LSVyaUlf.js:258 🚫 Unsafe path for token refresh: /oauth/callback
VM5 index-LSVyaUlf.js:258 🔍 Popup mode detection started: Object
VM5 index-LSVyaUlf.js:228 🔍 Searching for OAuth flow state with state: 22-OsAfp...
VM5 index-LSVyaUlf.js:228 📋 Found total flow states: 0
VM5 index-LSVyaUlf.js:228 🔍 Flow state not found in getAllFlowStates, trying direct sessionStorage search...
VM5 index-LSVyaUlf.js:228 🚨 OAuth flow state not found for state: 22-OsAfp... Object
getFlowState @ VM5 index-LSVyaUlf.js:228
VM5 index-LSVyaUlf.js:258 🎯 Popup mode detected via window.parent
VM5 index-LSVyaUlf.js:265 🛑 User not authenticated, stopping token refresh
VM5 index-LSVyaUlf.js:228 🔄 Migrating legacy OAuth state to new state manager
VM5 index-LSVyaUlf.js:228 🔐 OAuth flow state created: Object
VM5 index-LSVyaUlf.js:228 ✅ Legacy OAuth state migrated: me6eulp0bj3n59h0c5b
VM5 index-LSVyaUlf.js:750 🔄 Legacy OAuth state migrated: Object
VM5 index-LSVyaUlf.js:258 🔍 Popup mode detection started: Object
VM5 index-LSVyaUlf.js:228 🔍 Searching for OAuth flow state with state: 22-OsAfp...
VM5 index-LSVyaUlf.js:228 📋 Found total flow states: 1
VM5 index-LSVyaUlf.js:228 ✅ Found OAuth flow state: Object
VM5 index-LSVyaUlf.js:258 🎯 Popup mode detected via window.parent
VM5 index-LSVyaUlf.js:750 🔍 OAuth Callback Mode Detection: Object
VM5 index-LSVyaUlf.js:750 🔍 OAuth Callback URL Analysis: Object
VM5 index-LSVyaUlf.js:750 🚨 OAuth Server Error: ObjectallParams: {error: 'login_required', state: '22-OsAfp_cEi_CdhhKiH3rJHhZiFCNbpYP3vMYjV0bI', error_description: 'User not logged in'}error: "login_required"errorDescription: "User not logged in"fullUrl: "https://maxlab.dwchem.co.kr/oauth/callback?error=login_required&state=22-OsAfp_cEi_CdhhKiH3rJHhZiFCNbpYP3vMYjV0bI&error_description=User+not+logged+in"[[Prototype]]: Object
(anonymous) @ VM5 index-LSVyaUlf.js:750
VM5 index-LSVyaUlf.js:258 🔇 Silent auth timeout
VM5 index-LSVyaUlf.js:263 🔀 OAuth Coordinator [01:05:12][Q:1|A:0]: ✅ silent_login request completed: silent_login_1754874302229_3dsjjb17x
VM5 index-LSVyaUlf.js:258 🚫 Silent auth request aborted by coordinator
VM5 index-LSVyaUlf.js:265 ℹ️ Silent SSO login failed: silent_auth_timeout
VM5 index-LSVyaUlf.js:228 ❌ Auth error: silent_auth_timeout - Automatic login timed out
setAuthError @ VM5 index-LSVyaUlf.js:228
(anonymous) @ VM5 index-LSVyaUlf.js:846
VM5 index-LSVyaUlf.js:227 🔄 Auth state change: error → ready {isAuthenticated: false, hasUser: false, stackTrace: Array(2)}
VM5 index-LSVyaUlf.js:265 🛑 User not authenticated, stopping token refresh
VM5 index-LSVyaUlf.js:791 [Auto-scroll Calculation] {nodeId: 'COMMON_1753777474814', nodeHeight: 170, visibleMeasurements: 1, actualMeasurements: 3, needsScroll: true, …}
VM5 index-LSVyaUlf.js:846 🚨 No access token found - session expired
(anonymous) @ VM5 index-LSVyaUlf.js:846
VM5 index-LSVyaUlf.js:846 🔒 Executing cross-domain logout cleanup
handleLogout @ VM5 index-LSVyaUlf.js:846
(anonymous) @ VM5 index-LSVyaUlf.js:846
VM5 index-LSVyaUlf.js:846 🚨 Cross-domain logout detected - clearing session
VM5 index-LSVyaUlf.js:846 🔄 Cross-domain logout detected on public page, staying on current page
VM5 index-LSVyaUlf.js:846 🚨 Cross-domain logout broadcast received
n.onmessage @ VM5 index-LSVyaUlf.js:846
VM5 index-LSVyaUlf.js:846 🔒 Executing cross-domain logout cleanup
handleLogout @ VM5 index-LSVyaUlf.js:846
n.onmessage @ VM5 index-LSVyaUlf.js:846
oauthProviderLogout-DtUtMk7L.js:1 🍪 OAuth provider cookies cleared
VM5 index-LSVyaUlf.js:265 🍪 OAuth provider cookies cleared
VM5 index-LSVyaUlf.js:263 🧹 Refresh token cleared from secure storage
VM5 index-LSVyaUlf.js:263 🧹 Refresh token cleared from secure storage
VM5 index-LSVyaUlf.js:263 🧹 Clearing all user tokens...
VM5 index-LSVyaUlf.js:263 🧹 Refresh token cleared from secure storage
VM5 index-LSVyaUlf.js:263 ✅ Cleared tokens for 0 users
VM5 index-LSVyaUlf.js:263 🔐 User-isolated tokens cleared
VM5 index-LSVyaUlf.js:263 🧹 All tokens cleared
VM5 index-LSVyaUlf.js:265 🔒 Starting comprehensive security cleanup...
VM5 index-LSVyaUlf.js:263 🧹 Refresh token cleared from secure storage
VM5 index-LSVyaUlf.js:263 🧹 Refresh token cleared from secure storage
VM5 index-LSVyaUlf.js:263 🧹 Clearing all user tokens...
VM5 index-LSVyaUlf.js:263 🧹 Refresh token cleared from secure storage
VM5 index-LSVyaUlf.js:263 ✅ Cleared tokens for 0 users
VM5 index-LSVyaUlf.js:263 🔐 User-isolated tokens cleared
VM5 index-LSVyaUlf.js:263 🧹 All tokens cleared
VM5 index-LSVyaUlf.js:263 🧹 Clearing all user tokens...
VM5 index-LSVyaUlf.js:263 🧹 Refresh token cleared from secure storage
VM5 index-LSVyaUlf.js:263 ✅ Cleared tokens for 0 users
VM5 index-LSVyaUlf.js:263 🔒 Starting comprehensive browser security cleanup...
VM5 index-LSVyaUlf.js:263 ✅ Cleared 1 localStorage items
VM5 index-LSVyaUlf.js:263 ✅ Cleared 1 sessionStorage items
VM5 index-LSVyaUlf.js:263 ✅ Cleared 0 cookies
VM5 index-LSVyaUlf.js:263 ✅ Cleared 0 IndexedDB databases
VM5 index-LSVyaUlf.js:263 ✅ Cleared 0 cache storages
VM5 index-LSVyaUlf.js:263 🔒 Security cleanup completed in 1.30ms
VM5 index-LSVyaUlf.js:265 ✅ Security cleanup completed: {localStorage: 1, sessionStorage: 1, cookies: 0, indexedDB: 0, cacheStorage: 0, …}
VM5 index-LSVyaUlf.js:265 🧹 Complete secure cleanup finished
VM5 index-LSVyaUlf.js:227 🔄 MaxLab manual reset initiated
VM5 index-LSVyaUlf.js:228 ✅ OAuth loop prevention state reset
VM5 index-LSVyaUlf.js:228 ✅ User logged out successfully
VM5 index-LSVyaUlf.js:846 🚨 No access token found - session expired
(anonymous) @ VM5 index-LSVyaUlf.js:846
VM5 index-LSVyaUlf.js:846 🔒 Executing cross-domain logout cleanup
handleLogout @ VM5 index-LSVyaUlf.js:846
(anonymous) @ VM5 index-LSVyaUlf.js:846
VM5 index-LSVyaUlf.js:846 🚨 Cross-domain logout detected - clearing session
VM5 index-LSVyaUlf.js:846 🔄 Cross-domain logout detected on public page, staying on current page
VM5 index-LSVyaUlf.js:846 🚨 Cross-domain logout broadcast received
n.onmessage @ VM5 index-LSVyaUlf.js:846
VM5 index-LSVyaUlf.js:846 🔒 Executing cross-domain logout cleanup
handleLogout @ VM5 index-LSVyaUlf.js:846
n.onmessage @ VM5 index-LSVyaUlf.js:846
oauthProviderLogout-DtUtMk7L.js:1 🍪 OAuth provider cookies cleared
VM5 index-LSVyaUlf.js:265 🍪 OAuth provider cookies cleared
VM5 index-LSVyaUlf.js:263 🧹 Refresh token cleared from secure storage
VM5 index-LSVyaUlf.js:263 🧹 Refresh token cleared from secure storage
VM5 index-LSVyaUlf.js:263 🧹 Clearing all user tokens...
VM5 index-LSVyaUlf.js:263 🧹 Refresh token cleared from secure storage
VM5 index-LSVyaUlf.js:263 ✅ Cleared tokens for 0 users
VM5 index-LSVyaUlf.js:263 🔐 User-isolated tokens cleared
VM5 index-LSVyaUlf.js:263 🧹 All tokens cleared
VM5 index-LSVyaUlf.js:265 🔒 Starting comprehensive security cleanup...
VM5 index-LSVyaUlf.js:263 🧹 Refresh token cleared from secure storage
VM5 index-LSVyaUlf.js:263 🧹 Refresh token cleared from secure storage
VM5 index-LSVyaUlf.js:263 🧹 Clearing all user tokens...
VM5 index-LSVyaUlf.js:263 🧹 Refresh token cleared from secure storage
VM5 index-LSVyaUlf.js:263 ✅ Cleared tokens for 0 users
VM5 index-LSVyaUlf.js:263 🔐 User-isolated tokens cleared
VM5 index-LSVyaUlf.js:263 🧹 All tokens cleared
VM5 index-LSVyaUlf.js:263 🧹 Clearing all user tokens...
VM5 index-LSVyaUlf.js:263 🧹 Refresh token cleared from secure storage
VM5 index-LSVyaUlf.js:263 ✅ Cleared tokens for 0 users
VM5 index-LSVyaUlf.js:263 🔒 Starting comprehensive browser security cleanup...
VM5 index-LSVyaUlf.js:263 ✅ Cleared 1 localStorage items
VM5 index-LSVyaUlf.js:263 ✅ Cleared 1 sessionStorage items
VM5 index-LSVyaUlf.js:263 ✅ Cleared 0 cookies
VM5 index-LSVyaUlf.js:263 ✅ Cleared 0 IndexedDB databases
VM5 index-LSVyaUlf.js:263 ✅ Cleared 0 cache storages
VM5 index-LSVyaUlf.js:263 🔒 Security cleanup completed in 2.00ms
VM5 index-LSVyaUlf.js:265 ✅ Security cleanup completed: {localStorage: 1, sessionStorage: 1, cookies: 0, indexedDB: 0, cacheStorage: 0, …}
VM5 index-LSVyaUlf.js:265 🧹 Complete secure cleanup finished
VM5 index-LSVyaUlf.js:227 🔄 MaxLab manual reset initiated
VM5 index-LSVyaUlf.js:228 ✅ OAuth loop prevention state reset
VM5 index-LSVyaUlf.js:228 ✅ User logged out successfully

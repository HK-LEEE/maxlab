11:30:12.909 🔄 Rehydrating auth state for initialization 
Object { state: {…} }
index-C6ZA7B7I.js:228:5827
11:30:12.909 ⚠️ Access token expired locally, will attempt refresh with refresh token index-C6ZA7B7I.js:228:6294
11:30:12.909 ❌ No refresh token available, clearing auth completely index-C6ZA7B7I.js:228:6682
11:30:12.911 🛡️ New CSRF token generated index-C6ZA7B7I.js:263:6222
11:30:12.911 🛡️ CSRF protection initialized with new token index-C6ZA7B7I.js:263:5768
11:30:12.916 WEBGL_debug_renderer_info is deprecated in Firefox and will be removed. Please use RENDERER. index-C6ZA7B7I.js:263:21207
11:30:12.920 🔀 OAuth Coordinator [02:30:12][Q:0|A:0]: 🏗️ OAuth Request Coordinator initialized index-C6ZA7B7I.js:263:51842
11:30:12.938 📍 Saving original navigation URL: https://maxlab.dwchem.co.kr/ index-C6ZA7B7I.js:851:102653
11:30:12.938 ✅ Auth sync initialized with BroadcastChannel index-C6ZA7B7I.js:263:95165
11:30:12.938 🔒 Initializing cross-domain logout listener index-C6ZA7B7I.js:851:105338
11:30:12.939 📡 SSO: PostMessage listener registered index-C6ZA7B7I.js:851:108343
11:30:12.939 🚀 Starting auth initialization (single instance guaranteed) index-C6ZA7B7I.js:851:112849
11:30:12.939 ⚠️ Cached token locally invalid or expired, attempting refresh index-C6ZA7B7I.js:851:114623
11:30:12.939 🔄 Force refresh requested, bypassing token validity check index-C6ZA7B7I.js:263:71163
11:30:12.939 🔍 Found refresh token metadata, will verify encrypted token exists index-C6ZA7B7I.js:263:59219
11:30:12.939 🔍 Verifying token consistency... index-C6ZA7B7I.js:263:63935
11:30:12.941 🔄 Attempting refresh with refresh token... index-C6ZA7B7I.js:263:72769
11:30:12.946 🔓 Token decrypted successfully index-C6ZA7B7I.js:263:28289
11:30:12.946 🔓 Retrieved encrypted refresh token index-C6ZA7B7I.js:263:57085
11:30:12.946 ✅ Token consistency verified - metadata and token both exist index-C6ZA7B7I.js:263:64506
11:30:12.946 🔓 Token decrypted successfully index-C6ZA7B7I.js:263:28289
11:30:12.946 🔓 Retrieved encrypted refresh token index-C6ZA7B7I.js:263:57085
11:30:12.946 🔄 Attempting refresh with refresh token... index-C6ZA7B7I.js:263:53138
11:30:12.946 📡 Auth Server URL: https://max.dwchem.co.kr index-C6ZA7B7I.js:263:53232
11:30:12.946 🔑 Client ID: maxlab index-C6ZA7B7I.js:263:53269
11:30:12.946 🔐 Has Client Secret: false index-C6ZA7B7I.js:263:53312
11:30:12.946 🎟️ Refresh Token Available: true index-C6ZA7B7I.js:263:53369
11:30:12.946 🎟️ Refresh Token Prefix: g3V47X6u4X... index-C6ZA7B7I.js:263:53417
11:30:12.946 🔀 OAuth Coordinator [02:30:12][Q:0|A:0]: 📝 Queuing sync request: sync_1755138612947_pfi2df8kh 
Object { url: "https://max.dwchem.co.kr/api/oauth/token", priority: 1 }
index-C6ZA7B7I.js:263:51793
11:30:12.947 🔀 OAuth Coordinator [02:30:12][Q:1|A:0]: 🔄 Starting OAuth request queue processing index-C6ZA7B7I.js:263:51842
11:30:12.947 🔀 OAuth Coordinator [02:30:12][Q:1|A:1]: 🚀 Processing sync request: sync_1755138612947_pfi2df8kh index-C6ZA7B7I.js:263:51842
11:30:12.968 🔄 Request failed with status 500, retrying in 1000ms (attempt 1/3) index-C6ZA7B7I.js:263:66955
11:30:12.968 🔒 Security event logged: refresh_token_oauth_server_error (low) 
Object { eventId: "evt_1755138612968_pnkj36gu", timestamp: "2025-08-14T02:30:12.968Z", eventType: "refresh_token_oauth_server_error", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138612917_vb8lbwlg1va", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:12.968 🔒 Security Event: 
Object { timestamp: "2025-08-14T02:30:12.968Z", event: "oauth_server_error", details: {…} }
index-C6ZA7B7I.js:263:63266
11:30:13.997 🔄 Request failed with status 500, retrying in 2000ms (attempt 2/3) index-C6ZA7B7I.js:263:66955
11:30:13.997 🔒 Security event logged: refresh_token_oauth_server_error (low) 
Object { eventId: "evt_1755138613998_se6zs2fe", timestamp: "2025-08-14T02:30:13.998Z", eventType: "refresh_token_oauth_server_error", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138612917_vb8lbwlg1va", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:13.997 🔒 Security Event: 
Object { timestamp: "2025-08-14T02:30:13.998Z", event: "oauth_server_error", details: {…} }
index-C6ZA7B7I.js:263:63266
11:30:16.017 🔄 Request failed with status 500, retrying in 4000ms (attempt 3/3) index-C6ZA7B7I.js:263:66955
11:30:16.017 🔒 Security event logged: refresh_token_oauth_server_error (low) 
Object { eventId: "evt_1755138616017_otloqz4w", timestamp: "2025-08-14T02:30:16.017Z", eventType: "refresh_token_oauth_server_error", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138612917_vb8lbwlg1va", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:16.017 🔒 Security Event: 
Object { timestamp: "2025-08-14T02:30:16.017Z", event: "oauth_server_error", details: {…} }
index-C6ZA7B7I.js:263:63266
11:30:20.035 🔀 OAuth Coordinator [02:30:20][Q:1|A:0]: ✅ sync request completed: sync_1755138612947_pfi2df8kh index-C6ZA7B7I.js:263:51842
11:30:20.035 ❌ Token refresh request failed: 
Object { status: 500, statusText: "", url: "https://max.dwchem.co.kr/api/oauth/token", errorData: {}, headers: {…} }
index-C6ZA7B7I.js:263:53896
11:30:20.035 🔥 5xx Server Error - Auth server internal error index-C6ZA7B7I.js:263:54325
11:30:20.036 🔒 Security event logged: refresh_token_server_error (low) 
Object { eventId: "evt_1755138620036_hc3qes4f", timestamp: "2025-08-14T02:30:20.036Z", eventType: "refresh_token_server_error", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138612917_vb8lbwlg1va", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:20.036 ❌ Refresh token renewal failed: Error: server_error
    refreshWithRefreshToken https://maxlab.dwchem.co.kr/assets/index-C6ZA7B7I.js:263
index-C6ZA7B7I.js:263:55513
11:30:20.036 🔒 Security event logged: refresh_token_renewal_failed (low) 
Object { eventId: "evt_1755138620036_3g0xh6sj", timestamp: "2025-08-14T02:30:20.036Z", eventType: "refresh_token_renewal_failed", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138612917_vb8lbwlg1va", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:20.036 ❌ Refresh token renewal failed: Error: server_error
    refreshWithRefreshToken https://maxlab.dwchem.co.kr/assets/index-C6ZA7B7I.js:263
index-C6ZA7B7I.js:263:73064
11:30:20.036 🔄 Refresh token failed, trying silent auth as fallback... index-C6ZA7B7I.js:263:71759
11:30:20.036 🔄 Attempting token refresh with fallback chain... index-C6ZA7B7I.js:265:11496
11:30:20.037 🔓 Token decrypted successfully index-C6ZA7B7I.js:263:28289
11:30:20.037 🔓 Retrieved encrypted refresh token index-C6ZA7B7I.js:263:57085
11:30:20.037 ✅ Refresh token is valid index-C6ZA7B7I.js:263:59800
11:30:20.037 🎟️ Attempting refresh with refresh token... index-C6ZA7B7I.js:265:15168
11:30:20.038 🔓 Token decrypted successfully index-C6ZA7B7I.js:263:28289
11:30:20.039 🔓 Retrieved encrypted refresh token index-C6ZA7B7I.js:263:57085
11:30:20.039 🔄 Attempting refresh with refresh token... index-C6ZA7B7I.js:263:53138
11:30:20.039 📡 Auth Server URL: https://max.dwchem.co.kr index-C6ZA7B7I.js:263:53232
11:30:20.039 🔑 Client ID: maxlab index-C6ZA7B7I.js:263:53269
11:30:20.039 🔐 Has Client Secret: false index-C6ZA7B7I.js:263:53312
11:30:20.039 🎟️ Refresh Token Available: true index-C6ZA7B7I.js:263:53369
11:30:20.039 🎟️ Refresh Token Prefix: g3V47X6u4X... index-C6ZA7B7I.js:263:53417
11:30:20.039 🔀 OAuth Coordinator [02:30:20][Q:0|A:0]: 📝 Queuing sync request: sync_1755138620040_ahf1y653y 
Object { url: "https://max.dwchem.co.kr/api/oauth/token", priority: 1 }
index-C6ZA7B7I.js:263:51793
11:30:20.055 🔄 Request failed with status 500, retrying in 1000ms (attempt 1/3) index-C6ZA7B7I.js:263:66955
11:30:20.055 🔒 Security event logged: refresh_token_oauth_server_error (low) 
Object { eventId: "evt_1755138620055_tq7g9ues", timestamp: "2025-08-14T02:30:20.055Z", eventType: "refresh_token_oauth_server_error", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138612917_vb8lbwlg1va", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:20.055 🔒 Security Event: 
Object { timestamp: "2025-08-14T02:30:20.055Z", event: "oauth_server_error", details: {…} }
index-C6ZA7B7I.js:263:63266
11:30:20.059 🔀 OAuth Coordinator [02:30:20][Q:1|A:1]: 🚀 Processing sync request: sync_1755138620040_ahf1y653y index-C6ZA7B7I.js:263:51842
11:30:21.071 🔄 Request failed with status 500, retrying in 2000ms (attempt 2/3) index-C6ZA7B7I.js:263:66955
11:30:21.071 🔒 Security event logged: refresh_token_oauth_server_error (low) 
Object { eventId: "evt_1755138621071_mgdh0ja5", timestamp: "2025-08-14T02:30:21.071Z", eventType: "refresh_token_oauth_server_error", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138612917_vb8lbwlg1va", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:21.071 🔒 Security Event: 
Object { timestamp: "2025-08-14T02:30:21.071Z", event: "oauth_server_error", details: {…} }
index-C6ZA7B7I.js:263:63266
11:30:23.086 🔄 Request failed with status 500, retrying in 4000ms (attempt 3/3) index-C6ZA7B7I.js:263:66955
11:30:23.086 🔒 Security event logged: refresh_token_oauth_server_error (low) 
Object { eventId: "evt_1755138623087_g4sbi1dq", timestamp: "2025-08-14T02:30:23.087Z", eventType: "refresh_token_oauth_server_error", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138612917_vb8lbwlg1va", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:23.086 🔒 Security Event: 
Object { timestamp: "2025-08-14T02:30:23.087Z", event: "oauth_server_error", details: {…} }
index-C6ZA7B7I.js:263:63266
11:30:27.102 🔀 OAuth Coordinator [02:30:27][Q:1|A:0]: ✅ sync request completed: sync_1755138620040_ahf1y653y index-C6ZA7B7I.js:263:51842
11:30:27.102 ❌ Token refresh request failed: 
Object { status: 500, statusText: "", url: "https://max.dwchem.co.kr/api/oauth/token", errorData: {}, headers: {…} }
index-C6ZA7B7I.js:263:53896
11:30:27.102 🔥 5xx Server Error - Auth server internal error index-C6ZA7B7I.js:263:54325
11:30:27.102 🔒 Security event logged: refresh_token_server_error (low) 
Object { eventId: "evt_1755138627102_unfu6xff", timestamp: "2025-08-14T02:30:27.102Z", eventType: "refresh_token_server_error", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138612917_vb8lbwlg1va", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:27.102 ❌ Refresh token renewal failed: Error: server_error
    refreshWithRefreshToken https://maxlab.dwchem.co.kr/assets/index-C6ZA7B7I.js:263
index-C6ZA7B7I.js:263:55513
11:30:27.102 🔒 Security event logged: refresh_token_renewal_failed (low) 
Object { eventId: "evt_1755138627103_5twrefug", timestamp: "2025-08-14T02:30:27.103Z", eventType: "refresh_token_renewal_failed", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138612917_vb8lbwlg1va", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:27.102 ⚠️ Refresh token failed, falling back to silent auth: server_error index-C6ZA7B7I.js:265:16058
11:30:27.103 🔇 Falling back to silent authentication... index-C6ZA7B7I.js:265:16864
11:30:27.103 🔇 Attempting silent SSO login... index-C6ZA7B7I.js:265:4480
11:30:27.103 🔀 OAuth Coordinator [02:30:27][Q:0|A:0]: 📝 Queuing silent_login request: silent_login_1755138627103_03py0hg1a 
Object { url: "silent_oauth_auth", priority: 0 }
index-C6ZA7B7I.js:263:51793
11:30:27.103 ✅ Silent auth conditions met, starting... index-C6ZA7B7I.js:258:20442
11:30:27.103 🔇 Starting silent authentication... index-C6ZA7B7I.js:258:16370
11:30:27.130 ✅ Sent 10 security events to server index-C6ZA7B7I.js:263:41968
11:30:27.195 🔀 OAuth Coordinator [02:30:27][Q:1|A:1]: 🚀 Processing silent_login request: silent_login_1755138627103_03py0hg1a index-C6ZA7B7I.js:263:51842
11:30:37.104 🔇 Silent auth timeout index-C6ZA7B7I.js:258:17597
11:30:37.105 🔀 OAuth Coordinator [02:30:37][Q:1|A:0]: ✅ silent_login request completed: silent_login_1755138627103_03py0hg1a index-C6ZA7B7I.js:263:51842
11:30:37.105 🚫 Silent auth request aborted by coordinator index-C6ZA7B7I.js:258:16089
11:30:37.105 ℹ️ Silent SSO login failed: silent_auth_timeout index-C6ZA7B7I.js:265:6164
11:30:37.105 ❌ Silent auth fallback failed: silent_auth_timeout index-C6ZA7B7I.js:265:17112
11:30:37.105 🚨 SSO session completely failed, clearing all SSO metadata index-C6ZA7B7I.js:265:17217
11:30:37.105 ❌ Silent auth attempt 1 failed: silent_auth_timeout index-C6ZA7B7I.js:263:74808
11:30:37.105 🔄 Silent auth retry attempt 1 after 1000ms delay index-C6ZA7B7I.js:263:74118
11:30:38.105 🔄 Attempting token refresh with fallback chain... index-C6ZA7B7I.js:265:11496
11:30:38.107 🔓 Token decrypted successfully index-C6ZA7B7I.js:263:28289
11:30:38.107 🔓 Retrieved encrypted refresh token index-C6ZA7B7I.js:263:57085
11:30:38.107 ✅ Refresh token is valid index-C6ZA7B7I.js:263:59800
11:30:38.107 🎟️ Attempting refresh with refresh token... index-C6ZA7B7I.js:265:15168
11:30:38.108 🔓 Token decrypted successfully index-C6ZA7B7I.js:263:28289
11:30:38.108 🔓 Retrieved encrypted refresh token index-C6ZA7B7I.js:263:57085
11:30:38.108 🔄 Attempting refresh with refresh token... index-C6ZA7B7I.js:263:53138
11:30:38.108 📡 Auth Server URL: https://max.dwchem.co.kr index-C6ZA7B7I.js:263:53232
11:30:38.108 🔑 Client ID: maxlab index-C6ZA7B7I.js:263:53269
11:30:38.108 🔐 Has Client Secret: false index-C6ZA7B7I.js:263:53312
11:30:38.108 🎟️ Refresh Token Available: true index-C6ZA7B7I.js:263:53369
11:30:38.108 🎟️ Refresh Token Prefix: g3V47X6u4X... index-C6ZA7B7I.js:263:53417
11:30:38.108 🔀 OAuth Coordinator [02:30:38][Q:0|A:0]: 📝 Queuing sync request: sync_1755138638109_i27b5w93p 
Object { url: "https://max.dwchem.co.kr/api/oauth/token", priority: 1 }
index-C6ZA7B7I.js:263:51793
11:30:38.109 🔀 OAuth Coordinator [02:30:38][Q:1|A:0]: 🔄 Starting OAuth request queue processing index-C6ZA7B7I.js:263:51842
11:30:38.109 🔀 OAuth Coordinator [02:30:38][Q:1|A:1]: 🚀 Processing sync request: sync_1755138638109_i27b5w93p index-C6ZA7B7I.js:263:51842
11:30:38.127 🔄 Request failed with status 500, retrying in 1000ms (attempt 1/3) index-C6ZA7B7I.js:263:66955
11:30:38.127 🔒 Security event logged: refresh_token_oauth_server_error (low) 
Object { eventId: "evt_1755138638128_mkhh00uy", timestamp: "2025-08-14T02:30:38.128Z", eventType: "refresh_token_oauth_server_error", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138612917_vb8lbwlg1va", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:38.127 🔒 Security Event: 
Object { timestamp: "2025-08-14T02:30:38.128Z", event: "oauth_server_error", details: {…} }
index-C6ZA7B7I.js:263:63266
11:30:39.145 🔄 Request failed with status 500, retrying in 2000ms (attempt 2/3) index-C6ZA7B7I.js:263:66955
11:30:39.145 🔒 Security event logged: refresh_token_oauth_server_error (low) 
Object { eventId: "evt_1755138639145_wbyrjbp6", timestamp: "2025-08-14T02:30:39.145Z", eventType: "refresh_token_oauth_server_error", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138612917_vb8lbwlg1va", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:39.145 🔒 Security Event: 
Object { timestamp: "2025-08-14T02:30:39.145Z", event: "oauth_server_error", details: {…} }
index-C6ZA7B7I.js:263:63266
11:30:41.162 🔄 Request failed with status 500, retrying in 4000ms (attempt 3/3) index-C6ZA7B7I.js:263:66955
11:30:41.163 🔒 Security event logged: refresh_token_oauth_server_error (low) 
Object { eventId: "evt_1755138641163_4a5vy7rn", timestamp: "2025-08-14T02:30:41.163Z", eventType: "refresh_token_oauth_server_error", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138612917_vb8lbwlg1va", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:41.163 🔒 Security Event: 
Object { timestamp: "2025-08-14T02:30:41.163Z", event: "oauth_server_error", details: {…} }
index-C6ZA7B7I.js:263:63266
11:30:42.942 ✅ Sent 3 security events to server index-C6ZA7B7I.js:263:41968
11:30:45.190 XHRPOST
https://max.dwchem.co.kr/api/oauth/token
NS_BINDING_ABORTED

11:30:45.216 🔀 OAuth Coordinator [02:30:45][Q:1|A:0]: ✅ sync request completed: sync_1755138638109_i27b5w93p index-C6ZA7B7I.js:263:51842
11:30:45.216 ❌ Token refresh request failed: 
Object { status: 500, statusText: "", url: "https://max.dwchem.co.kr/api/oauth/token", errorData: {}, headers: {…} }
index-C6ZA7B7I.js:263:53896
11:30:45.216 🔥 5xx Server Error - Auth server internal error index-C6ZA7B7I.js:263:54325
11:30:45.217 🔒 Security event logged: refresh_token_server_error (low) 
Object { eventId: "evt_1755138645217_ri58y3qp", timestamp: "2025-08-14T02:30:45.217Z", eventType: "refresh_token_server_error", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138612917_vb8lbwlg1va", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:45.217 ❌ Refresh token renewal failed: Error: server_error
    refreshWithRefreshToken https://maxlab.dwchem.co.kr/assets/index-C6ZA7B7I.js:263
index-C6ZA7B7I.js:263:55513
11:30:45.217 🔒 Security event logged: refresh_token_renewal_failed (low) 
Object { eventId: "evt_1755138645218_sfjja4x9", timestamp: "2025-08-14T02:30:45.218Z", eventType: "refresh_token_renewal_failed", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138612917_vb8lbwlg1va", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:45.217 ⚠️ Refresh token failed, falling back to silent auth: server_error index-C6ZA7B7I.js:265:16058
11:30:45.218 🔇 Falling back to silent authentication... index-C6ZA7B7I.js:265:16864
11:30:45.218 🔇 Attempting silent SSO login... index-C6ZA7B7I.js:265:4480
11:30:45.218 🔀 OAuth Coordinator [02:30:45][Q:0|A:0]: 📝 Queuing silent_login request: silent_login_1755138645218_dzdpwl867 
Object { url: "silent_oauth_auth", priority: 0 }
index-C6ZA7B7I.js:263:51793
11:30:45.218 ✅ Silent auth conditions met, starting... index-C6ZA7B7I.js:258:20442
11:30:45.219 🔇 Starting silent authentication... index-C6ZA7B7I.js:258:16370
11:30:45.236 GET
https://max.dwchem.co.kr/api/oauth/authorize?response_type=code&client_id=maxlab&redirect_uri=https://maxlab.dwchem.co.kr/oauth/callback&scope=openid+profile+email+read:profile+read:groups+manage:workflows&state=SkEarDHVFxLrv_WZh9C02lHsOzYeijoWcxsIzrZnmck&code_challenge=XQX4z20xNormFG_f634MenSzOG013raclm5Ci1Vcmwk&code_challenge_method=S256&prompt=none&nonce=e8ad3a930eb64e578d9cac1f7e216c5b6b83542ea5b62b01be0a793c73b1fb12
[HTTP/2 307  22ms]

11:30:45.249 🔀 OAuth Coordinator [02:30:45][Q:1|A:1]: 🚀 Processing silent_login request: silent_login_1755138645218_dzdpwl867 index-C6ZA7B7I.js:263:51842
11:30:45.286 GET
https://maxlab.dwchem.co.kr/oauth/callback?code=eRIrBnD1_7WbCdKNJYNXLGBU_UdkmjrQ-n1QUeZtcUY&state=SkEarDHVFxLrv_WZh9C02lHsOzYeijoWcxsIzrZnmck
[HTTP/2 200  0ms]

11:30:45.322 GET
https://maxlab.dwchem.co.kr/assets/index-C6ZA7B7I.js
[HTTP/2 200  0ms]

11:30:45.374 🔄 Rehydrating auth state for initialization 
Object { state: {…} }
index-C6ZA7B7I.js:228:5827
11:30:45.376 🆕 New or unauthenticated user, preparing for silent auth attempt index-C6ZA7B7I.js:228:7076
11:30:45.378 🛡️ CSRF protection initialized with existing token index-C6ZA7B7I.js:263:5675
11:30:45.385 WEBGL_debug_renderer_info is deprecated in Firefox and will be removed. Please use RENDERER. index-C6ZA7B7I.js:263:21207
11:30:45.388 📁 Loaded 9 queued security events from localStorage index-C6ZA7B7I.js:263:45176
11:30:45.389 🔀 OAuth Coordinator [02:30:45][Q:0|A:0]: 🏗️ OAuth Request Coordinator initialized index-C6ZA7B7I.js:263:51842
11:30:45.403 ✅ Auth sync initialized with BroadcastChannel index-C6ZA7B7I.js:263:95165
11:30:45.403 🔒 Initializing cross-domain logout listener index-C6ZA7B7I.js:851:105338
11:30:45.404 📡 SSO: PostMessage listener registered index-C6ZA7B7I.js:851:108343
11:30:45.404 🚀 Starting auth initialization (single instance guaranteed) index-C6ZA7B7I.js:851:112849
11:30:45.404 ⚠️ Cached token locally invalid or expired, attempting refresh index-C6ZA7B7I.js:851:114623
11:30:45.404 🔄 Force refresh requested, bypassing token validity check index-C6ZA7B7I.js:263:71163
11:30:45.404 🔄 Attempting refresh with refresh token... index-C6ZA7B7I.js:263:72769
11:30:45.408 🔓 Token decrypted successfully index-C6ZA7B7I.js:263:28289
11:30:45.408 🔓 Retrieved encrypted refresh token index-C6ZA7B7I.js:263:57085
11:30:45.408 🔄 Attempting refresh with refresh token... index-C6ZA7B7I.js:263:53138
11:30:45.408 📡 Auth Server URL: https://max.dwchem.co.kr index-C6ZA7B7I.js:263:53232
11:30:45.408 🔑 Client ID: maxlab index-C6ZA7B7I.js:263:53269
11:30:45.408 🔐 Has Client Secret: false index-C6ZA7B7I.js:263:53312
11:30:45.408 🎟️ Refresh Token Available: true index-C6ZA7B7I.js:263:53369
11:30:45.408 🎟️ Refresh Token Prefix: g3V47X6u4X... index-C6ZA7B7I.js:263:53417
11:30:45.408 🔀 OAuth Coordinator [02:30:45][Q:0|A:0]: 📝 Queuing sync request: sync_1755138645408_jihaqp4vl 
Object { url: "https://max.dwchem.co.kr/api/oauth/token", priority: 1 }
index-C6ZA7B7I.js:263:51793
11:30:45.409 🔀 OAuth Coordinator [02:30:45][Q:1|A:0]: 🔄 Starting OAuth request queue processing index-C6ZA7B7I.js:263:51842
11:30:45.409 🔀 OAuth Coordinator [02:30:45][Q:1|A:1]: 🚀 Processing sync request: sync_1755138645408_jihaqp4vl index-C6ZA7B7I.js:263:51842
11:30:45.421 XHRPOST
https://max.dwchem.co.kr/api/oauth/token
[HTTP/2 500  17ms]

11:30:45.460 🔄 Request failed with status 500, retrying in 1000ms (attempt 1/3) index-C6ZA7B7I.js:263:66955
11:30:45.461 🔒 Security event logged: refresh_token_oauth_server_error (low) 
Object { eventId: "evt_1755138645461_w7kbqu07", timestamp: "2025-08-14T02:30:45.461Z", eventType: "refresh_token_oauth_server_error", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138645387_7zlyizyb3uu", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:45.461 🔒 Security Event: 
Object { timestamp: "2025-08-14T02:30:45.461Z", event: "oauth_server_error", details: {…} }
index-C6ZA7B7I.js:263:63266
11:30:45.550 XHRPOST
https://max.dwchem.co.kr/api/security/events
[HTTP/2 200  29ms]

11:30:45.614 ✅ Sent 10 security events to server index-C6ZA7B7I.js:263:41968
11:30:46.467 XHRPOST
https://max.dwchem.co.kr/api/oauth/token
[HTTP/2 500  14ms]

11:30:46.483 🔄 Request failed with status 500, retrying in 2000ms (attempt 2/3) index-C6ZA7B7I.js:263:66955
11:30:46.483 🔒 Security event logged: refresh_token_oauth_server_error (low) 
Object { eventId: "evt_1755138646483_81w336vl", timestamp: "2025-08-14T02:30:46.483Z", eventType: "refresh_token_oauth_server_error", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138645387_7zlyizyb3uu", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:46.483 🔒 Security Event: 
Object { timestamp: "2025-08-14T02:30:46.483Z", event: "oauth_server_error", details: {…} }
index-C6ZA7B7I.js:263:63266
11:30:48.486 XHRPOST
https://max.dwchem.co.kr/api/oauth/token
[HTTP/2 500  12ms]

11:30:48.500 🔄 Request failed with status 500, retrying in 4000ms (attempt 3/3) index-C6ZA7B7I.js:263:66955
11:30:48.500 🔒 Security event logged: refresh_token_oauth_server_error (low) 
Object { eventId: "evt_1755138648501_7va07n5v", timestamp: "2025-08-14T02:30:48.501Z", eventType: "refresh_token_oauth_server_error", severity: "low", source: "frontend", userId: "21a2aaa7-444a-4038-bda3-d8bf2c4ef162", sessionId: "sess_1755138645387_7zlyizyb3uu", details: {…}, context: {…}, metadata: undefined }
index-C6ZA7B7I.js:263:40412
11:30:48.501 🔒 Security Event: 
Object { timestamp: "2025-08-14T02:30:48.501Z", event: "oauth_server_error", details: {…} }
index-C6ZA7B7I.js:263:63266




2|maxplatf | 2025-08-14T11:30:07: 2025-08-14 11:30:07.849 [DEBUG] app.services.session_monitor:177 - Session check completed: 3 sessions checked (took 0.00s)

/home/app-user/maxproject/maxplatform/backend/logs/pm2-out-0.log last 15 lines:
0|maxplatf | 2025-08-14T11:30:27: 2025-08-14 11:30:27.210 [ERROR] app.database:115 - 세부 에러: Traceback (most recent call last):
0|maxplatf | 2025-08-14T11:30:27:   File "/home/app-user/maxproject/maxplatform/backend/app/database.py", line 97, in get_db
0|maxplatf | 2025-08-14T11:30:27:     yield db
0|maxplatf | 2025-08-14T11:30:27:   File "/home/app-user/maxproject/maxplatform/backend/.venv/lib/python3.11/site-packages/fastapi/concurrency.py", line 27, in contextmanager_in_threadpool
0|maxplatf | 2025-08-14T11:30:27:     yield await run_in_threadpool(cm.__enter__)
0|maxplatf | 2025-08-14T11:30:27:   File "/home/app-user/maxproject/maxplatform/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 327, in app
0|maxplatf | 2025-08-14T11:30:27:     content = await serialize_response(
0|maxplatf | 2025-08-14T11:30:27:               ^^^^^^^^^^^^^^^^^^^^^^^^^
0|maxplatf | 2025-08-14T11:30:27:   File "/home/app-user/maxproject/maxplatform/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 176, in serialize_response
0|maxplatf | 2025-08-14T11:30:27:     raise ResponseValidationError(
0|maxplatf | 2025-08-14T11:30:27: fastapi.exceptions.ResponseValidationError: 1 validation errors:
0|maxplatf | 2025-08-14T11:30:27:   {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}
0|maxplatf | 2025-08-14T11:30:27:
0|maxplatf | 2025-08-14T11:30:27:
0|maxplatf | 2025-08-14T11:30:27: 2025-08-14 11:30:27.211 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "POST /api/oauth/token HTTP/1.1" 500

0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.215 [DEBUG] multipart.multipart:586 - Calling on_field_start with no data
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.216 [DEBUG] multipart.multipart:583 - Calling on_field_name with data[0:10]
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.216 [DEBUG] multipart.multipart:583 - Calling on_field_data with data[11:24]
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.216 [DEBUG] multipart.multipart:586 - Calling on_field_end with no data
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.216 [DEBUG] multipart.multipart:586 - Calling on_field_start with no data
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.216 [DEBUG] multipart.multipart:583 - Calling on_field_name with data[25:38]
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.216 [DEBUG] multipart.multipart:583 - Calling on_field_data with data[39:103]
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.216 [DEBUG] multipart.multipart:586 - Calling on_field_end with no data
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.216 [DEBUG] multipart.multipart:586 - Calling on_field_start with no data
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.216 [DEBUG] multipart.multipart:583 - Calling on_field_name with data[104:113]
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.216 [DEBUG] multipart.multipart:583 - Calling on_field_data with data[114:120]
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.216 [DEBUG] multipart.multipart:586 - Calling on_field_end with no data
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.216 [DEBUG] multipart.multipart:586 - Calling on_end with no data
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.219 [INFO] app.api.oauth_simple:2283 - Processing refresh token grant for client_id: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.219 [INFO] app.api.oauth_simple:2296 - Validating client credentials for client_id: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.219 [INFO] app.api.oauth_simple:489 - Looking up client in database: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.221 [INFO] app.api.oauth_simple:501 - Client found in database: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.221 [INFO] app.api.oauth_simple:520 - Client is_confidential: False, has_client_secret: False
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.221 [INFO] app.api.oauth_simple:527 - Client validation completed successfully: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.221 [INFO] app.api.oauth_simple:2298 - Client validation successful for client_id: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.221 [INFO] app.api.oauth_simple:2310 - Validating refresh token for client_id: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.221 [INFO] app.api.oauth_simple:334 - OAuth event: refresh_token_validation | Data: {'event_type': 'refresh_token_validation', 'client_id': 'maxlab', 'user_id': None, 'scope': None, 'success': True, 'ip_address': None, 'user_agent': None}
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.223 [INFO] app.api.oauth_simple:334 - OAuth event: refresh_token_validation | Data: {'event_type': 'refresh_token_validation', 'client_id': 'maxlab', 'user_id': '21a2aaa7-444a-4038-bda3-d8bf2c4ef162', 'scope': None, 'success': True, 'ip_address': None, 'user_agent': None}
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.223 [INFO] app.api.oauth_simple:2321 - Refresh token validation successful for client_id: maxlab, user_id: 21a2aaa7-444a-4038-bda3-d8bf2c4ef162
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.223 [INFO] app.core.token_refresh_coordinator:57 - ✅ Acquired refresh lock for user=21a2aaa7-444a-4038-bda3-d8bf2c4ef162, client=maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.223 [INFO] app.api.oauth_simple:2346 - 🔒 Token rotation under distributed lock for client_id: maxlab, user_id: 21a2aaa7-444a-4038-bda3-d8bf2c4ef162
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.223 [INFO] app.api.oauth_simple:383 - Starting graceful token rotation - old_hash: e50b7d7db4..., user_id: 21a2aaa7-444a-4038-bda3-d8bf2c4ef162, client_id: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.223 [INFO] app.api.oauth_simple:389 - Generated new refresh token - new_hash: 3228f19b8b...
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.224 [INFO] app.utils.auth:289 - Auth event: access_token_created | Data: {'event_type': 'access_token_created', 'user_id': '21a2aaa7-444a-4038-bda3-d8bf2c4ef162', 'client_id': None, 'success': True, 'additional_data': {'token_type': 'access', 'expires_at': '2025-08-14T02:33:28.223987', 'jti': '581c4873-a3d6-4a38-9acc-8c89b51e1720'}}
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.224 [INFO] app.api.oauth_simple:396 - Generated new access token for user_id: 21a2aaa7-444a-4038-bda3-d8bf2c4ef162
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.224 [INFO] app.api.oauth_simple:405 - Setting old token to 'rotating' status with grace period until 2025-08-14 02:30:38.224390
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.225 [INFO] app.api.oauth_simple:421 - Creating new refresh token with parent relationship
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.227 [INFO] app.api.oauth_simple:471 - Graceful rotation completed - old token has 2025-08-14 02:30:38.224390 grace period
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.227 [INFO] app.api.oauth_simple:472 - Token family: e50b7d7db4... → 3228f19b8b...
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.227 [DEBUG] app.core.token_refresh_coordinator:144 - 💾 Cached refresh result for user=21a2aaa7-444a-4038-bda3-d8bf2c4ef162, client=maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.227 [DEBUG] app.core.token_refresh_coordinator:104 - 🔓 Released refresh lock: token_refresh_lock:21a2aaa7-444a-4038-bda3-d8bf2c4ef162:maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.228 [ERROR] app.database:112 - 데이터베이스 세션 생성 실패: 1 validation errors:
0|maxplatform-backend-8000  | 2025-08-14T11:30:28:   {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}
0|maxplatform-backend-8000  | 2025-08-14T11:30:28:
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.228 [ERROR] app.database:115 - 세부 에러: Traceback (most recent call last):
0|maxplatform-backend-8000  | 2025-08-14T11:30:28:   File "/home/app-user/maxproject/maxplatform/backend/app/database.py", line 97, in get_db
0|maxplatform-backend-8000  | 2025-08-14T11:30:28:     yield db
0|maxplatform-backend-8000  | 2025-08-14T11:30:28:   File "/home/app-user/maxproject/maxplatform/backend/.venv/lib/python3.11/site-packages/fastapi/concurrency.py", line 27, in contextmanager_in_threadpool
0|maxplatform-backend-8000  | 2025-08-14T11:30:28:     yield await run_in_threadpool(cm.__enter__)
0|maxplatform-backend-8000  | 2025-08-14T11:30:28:   File "/home/app-user/maxproject/maxplatform/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 327, in app
0|maxplatform-backend-8000  | 2025-08-14T11:30:28:     content = await serialize_response(
0|maxplatform-backend-8000  | 2025-08-14T11:30:28:               ^^^^^^^^^^^^^^^^^^^^^^^^^
0|maxplatform-backend-8000  | 2025-08-14T11:30:28:   File "/home/app-user/maxproject/maxplatform/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 176, in serialize_response
0|maxplatform-backend-8000  | 2025-08-14T11:30:28:     raise ResponseValidationError(
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: fastapi.exceptions.ResponseValidationError: 1 validation errors:
0|maxplatform-backend-8000  | 2025-08-14T11:30:28:   {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}
0|maxplatform-backend-8000  | 2025-08-14T11:30:28:
0|maxplatform-backend-8000  | 2025-08-14T11:30:28:
0|maxplatform-backend-8000  | 2025-08-14T11:30:28: 2025-08-14 11:30:28.228 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "POST /api/oauth/token HTTP/1.1" 500
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.233 [DEBUG] multipart.multipart:586 - Calling on_field_start with no data
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.233 [DEBUG] multipart.multipart:583 - Calling on_field_name with data[0:10]
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.233 [DEBUG] multipart.multipart:583 - Calling on_field_data with data[11:24]
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.233 [DEBUG] multipart.multipart:586 - Calling on_field_end with no data
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.234 [DEBUG] multipart.multipart:586 - Calling on_field_start with no data
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.234 [DEBUG] multipart.multipart:583 - Calling on_field_name with data[25:38]
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.234 [DEBUG] multipart.multipart:583 - Calling on_field_data with data[39:103]
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.234 [DEBUG] multipart.multipart:586 - Calling on_field_end with no data
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.234 [DEBUG] multipart.multipart:586 - Calling on_field_start with no data
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.234 [DEBUG] multipart.multipart:583 - Calling on_field_name with data[104:113]
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.234 [DEBUG] multipart.multipart:583 - Calling on_field_data with data[114:120]
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.234 [DEBUG] multipart.multipart:586 - Calling on_field_end with no data
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.234 [DEBUG] multipart.multipart:586 - Calling on_end with no data
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.236 [INFO] app.api.oauth_simple:2283 - Processing refresh token grant for client_id: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.236 [INFO] app.api.oauth_simple:2296 - Validating client credentials for client_id: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.236 [INFO] app.api.oauth_simple:489 - Looking up client in database: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.237 [INFO] app.api.oauth_simple:501 - Client found in database: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.238 [INFO] app.api.oauth_simple:520 - Client is_confidential: False, has_client_secret: False
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.238 [INFO] app.api.oauth_simple:527 - Client validation completed successfully: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.238 [INFO] app.api.oauth_simple:2298 - Client validation successful for client_id: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.238 [INFO] app.api.oauth_simple:2310 - Validating refresh token for client_id: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.238 [INFO] app.api.oauth_simple:334 - OAuth event: refresh_token_validation | Data: {'event_type': 'refresh_token_validation', 'client_id': 'maxlab', 'user_id': None, 'scope': None, 'success': True, 'ip_address': None, 'user_agent': None}
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.239 [INFO] app.api.oauth_simple:334 - OAuth event: refresh_token_validation | Data: {'event_type': 'refresh_token_validation', 'client_id': 'maxlab', 'user_id': '21a2aaa7-444a-4038-bda3-d8bf2c4ef162', 'scope': None, 'success': True, 'ip_address': None, 'user_agent': None}
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.239 [INFO] app.api.oauth_simple:2321 - Refresh token validation successful for client_id: maxlab, user_id: 21a2aaa7-444a-4038-bda3-d8bf2c4ef162
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.240 [INFO] app.core.token_refresh_coordinator:57 - ✅ Acquired refresh lock for user=21a2aaa7-444a-4038-bda3-d8bf2c4ef162, client=maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.240 [INFO] app.api.oauth_simple:2346 - 🔒 Token rotation under distributed lock for client_id: maxlab, user_id: 21a2aaa7-444a-4038-bda3-d8bf2c4ef162
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.240 [INFO] app.api.oauth_simple:383 - Starting graceful token rotation - old_hash: e50b7d7db4..., user_id: 21a2aaa7-444a-4038-bda3-d8bf2c4ef162, client_id: maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.240 [INFO] app.api.oauth_simple:389 - Generated new refresh token - new_hash: 3409b70665...
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.240 [INFO] app.utils.auth:289 - Auth event: access_token_created | Data: {'event_type': 'access_token_created', 'user_id': '21a2aaa7-444a-4038-bda3-d8bf2c4ef162', 'client_id': None, 'success': True, 'additional_data': {'token_type': 'access', 'expires_at': '2025-08-14T02:33:30.240537', 'jti': 'dff3245c-5f5e-443d-9867-b3e8b47f5d14'}}
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.240 [INFO] app.api.oauth_simple:396 - Generated new access token for user_id: 21a2aaa7-444a-4038-bda3-d8bf2c4ef162
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.241 [INFO] app.api.oauth_simple:405 - Setting old token to 'rotating' status with grace period until 2025-08-14 02:30:40.240998
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.241 [INFO] app.api.oauth_simple:421 - Creating new refresh token with parent relationship
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.243 [INFO] app.api.oauth_simple:471 - Graceful rotation completed - old token has 2025-08-14 02:30:40.240998 grace period
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.243 [INFO] app.api.oauth_simple:472 - Token family: e50b7d7db4... → 3409b70665...
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.244 [DEBUG] app.core.token_refresh_coordinator:144 - 💾 Cached refresh result for user=21a2aaa7-444a-4038-bda3-d8bf2c4ef162, client=maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.244 [DEBUG] app.core.token_refresh_coordinator:104 - 🔓 Released refresh lock: token_refresh_lock:21a2aaa7-444a-4038-bda3-d8bf2c4ef162:maxlab
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.244 [ERROR] app.database:112 - 데이터베이스 세션 생성 실패: 1 validation errors:
0|maxplatform-backend-8000  | 2025-08-14T11:30:30:   {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}
0|maxplatform-backend-8000  | 2025-08-14T11:30:30:
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.245 [ERROR] app.database:115 - 세부 에러: Traceback (most recent call last):
0|maxplatform-backend-8000  | 2025-08-14T11:30:30:   File "/home/app-user/maxproject/maxplatform/backend/app/database.py", line 97, in get_db
0|maxplatform-backend-8000  | 2025-08-14T11:30:30:     yield db
0|maxplatform-backend-8000  | 2025-08-14T11:30:30:   File "/home/app-user/maxproject/maxplatform/backend/.venv/lib/python3.11/site-packages/fastapi/concurrency.py", line 27, in contextmanager_in_threadpool
0|maxplatform-backend-8000  | 2025-08-14T11:30:30:     yield await run_in_threadpool(cm.__enter__)
0|maxplatform-backend-8000  | 2025-08-14T11:30:30:   File "/home/app-user/maxproject/maxplatform/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 327, in app
0|maxplatform-backend-8000  | 2025-08-14T11:30:30:     content = await serialize_response(
0|maxplatform-backend-8000  | 2025-08-14T11:30:30:               ^^^^^^^^^^^^^^^^^^^^^^^^^
0|maxplatform-backend-8000  | 2025-08-14T11:30:30:   File "/home/app-user/maxproject/maxplatform/backend/.venv/lib/python3.11/site-packages/fastapi/routing.py", line 176, in serialize_response
0|maxplatform-backend-8000  | 2025-08-14T11:30:30:     raise ResponseValidationError(
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: fastapi.exceptions.ResponseValidationError: 1 validation errors:
0|maxplatform-backend-8000  | 2025-08-14T11:30:30:   {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}
0|maxplatform-backend-8000  | 2025-08-14T11:30:30:
0|maxplatform-backend-8000  | 2025-08-14T11:30:30:
0|maxplatform-backend-8000  | 2025-08-14T11:30:30: 2025-08-14 11:30:30.245 [INFO] uvicorn.access:496 - 192.168.15.220:0 - "POST /api/oauth/token HTTP/1.1" 500

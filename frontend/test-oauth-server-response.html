<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OAuth Server Response Test</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .error { background: #fef2f2; border: 2px solid #ef4444; }
        .success { background: #dcfce7; border: 2px solid #22c55e; }
        .info { background: #dbeafe; border: 2px solid #3b82f6; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”¬ OAuth Server Response Analysis</h1>
        <p>í˜„ì¬ ë°›ì€ ì—ëŸ¬ë¥¼ ë¶„ì„í•´ë³´ê² ìŠµë‹ˆë‹¤:</p>
    </div>

    <div class="container error">
        <h2>âŒ í˜„ì¬ ì—ëŸ¬</h2>
        <p><strong>ì—ëŸ¬ íƒ€ì…:</strong> login_required</p>
        <p><strong>ì—ëŸ¬ ì„¤ëª…:</strong> Force re-authentication required</p>
        <p><strong>ìƒíƒœ:</strong> 5aZEEfpLhGztgutr5xP4K7sXm2Y8gDCKEn9OGUcq4es_force_1754270186088</p>
    </div>

    <div class="container info">
        <h2>ğŸ” ë¶„ì„ ê²°ê³¼</h2>
        <p>ì´ ì—ëŸ¬ëŠ” OAuth ì„œë²„ê°€ <code>prompt=login</code> íŒŒë¼ë¯¸í„°ë¥¼ ì œëŒ€ë¡œ ì²˜ë¦¬í•˜ì§€ ëª»í•˜ê±°ë‚˜, ì¶”ê°€ì ì¸ ì¸ì¦ì´ í•„ìš”í•˜ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.</p>
        
        <h3>ğŸ“‹ ê°€ëŠ¥í•œ ì›ì¸ë“¤:</h3>
        <ul>
            <li><strong>ì„œë²„ êµ¬í˜„ ë¬¸ì œ:</strong> OAuth ì„œë²„ì—ì„œ prompt=loginì„ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•˜ì§€ ëª»í•¨</li>
            <li><strong>ì„¸ì…˜ ë¬¸ì œ:</strong> ê¸°ì¡´ ì„¸ì…˜ì´ ì™„ì „íˆ ì •ë¦¬ë˜ì§€ ì•ŠìŒ</li>
            <li><strong>í´ë¼ì´ì–¸íŠ¸ ì„¤ì • ë¬¸ì œ:</strong> í´ë¼ì´ì–¸íŠ¸ IDë‚˜ ë¦¬ë‹¤ì´ë ‰íŠ¸ URI ë¬¸ì œ</li>
            <li><strong>ìŠ¤ì½”í”„ ë¬¸ì œ:</strong> ìš”ì²­í•œ ìŠ¤ì½”í”„ì— ë¬¸ì œê°€ ìˆìŒ</li>
        </ul>
    </div>

    <div class="container success">
        <h2>âœ… í•´ê²° ë°©ì•ˆë“¤</h2>
        
        <h3>1. Prompt íŒŒë¼ë¯¸í„° ë³€ê²½</h3>
        <p><code>prompt=login</code> ëŒ€ì‹  ë‹¤ë¥¸ ê°’ë“¤ì„ ì‹œë„:</p>
        <ul>
            <li><code>prompt=consent</code> - ë™ì˜ í™”ë©´ ê°•ì œ í‘œì‹œ</li>
            <li><code>prompt=select_account</code> - ê³„ì • ì„ íƒ í™”ë©´ í‘œì‹œ</li>
            <li>Prompt íŒŒë¼ë¯¸í„° ì—†ì´ ì‹œë„</li>
        </ul>

        <h3>2. OAuth ì„œë²„ ì„¸ì…˜ ì •ë¦¬</h3>
        <p>OAuth ì„œë²„ì˜ ì„¸ì…˜ì„ ì™„ì „íˆ ì •ë¦¬í•œ í›„ ì¬ì‹œë„</p>

        <h3>3. ë‹¤ë¥¸ ê°•ì œ ë¡œê·¸ì¸ ë°©ë²•</h3>
        <p><code>max_age=0</code> íŒŒë¼ë¯¸í„° ì‚¬ìš©ìœ¼ë¡œ ê°•ì œ ì¬ì¸ì¦</p>
    </div>

    <div class="container info">
        <h2>ğŸ§ª í…ŒìŠ¤íŠ¸ ê¶Œì¥ì‚¬í•­</h2>
        <p>ë‹¤ìŒ ìˆœì„œë¡œ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”:</p>
        <ol>
            <li><strong>ê¸°ë³¸ ë¡œê·¸ì¸:</strong> prompt íŒŒë¼ë¯¸í„° ì—†ì´ ì‹œë„</li>
            <li><strong>Consent ê°•ì œ:</strong> prompt=consentë¡œ ì‹œë„</li>
            <li><strong>ê³„ì • ì„ íƒ:</strong> prompt=select_accountë¡œ ì‹œë„</li>
            <li><strong>Max Age:</strong> max_age=0ìœ¼ë¡œ ê°•ì œ ì¬ì¸ì¦</li>
        </ol>
        
        <p><a href="/test-basic-oauth.html" style="color: #3b82f6; text-decoration: underline;">
            ğŸ‘‰ Basic OAuth Test í˜ì´ì§€ì—ì„œ í…ŒìŠ¤íŠ¸í•´ë³´ê¸°
        </a></p>
    </div>

    <script>
        // í˜„ì¬ ì—ëŸ¬ ì •ë³´ë¥¼ localStorageì— ì €ì¥
        const errorInfo = {
            type: 'login_required',
            description: 'Force re-authentication required',
            state: '5aZEEfpLhGztgutr5xP4K7sXm2Y8gDCKEn9OGUcq4es_force_1754270186088',
            timestamp: new Date().toISOString(),
            analysis: 'OAuth server prompt=login parameter handling issue'
        };
        
        console.log('ğŸ”¬ OAuth Error Analysis:', errorInfo);
        localStorage.setItem('last_oauth_error', JSON.stringify(errorInfo));
    </script>
</body>
</html>